this.itsec=this.itsec||{},this.itsec["user-groups"]=this.itsec["user-groups"]||{},this.itsec["user-groups"].settings=(window.itsecWebpackJsonP=window.itsecWebpackJsonP||[]).push([[36],{"1ZqX":function(e,t){!function(){e.exports=this.wp.data}()},ELjz:function(e,t,r){},GRId:function(e,t){!function(){e.exports=this.wp.element}()},"GjY+":function(e,t,r){},GrEf:function(e,t,r){},K9lf:function(e,t){!function(){e.exports=this.wp.compose}()},Mmq9:function(e,t){!function(){e.exports=this.wp.url}()},QmYb:function(e,t,r){},RUGT:function(e,t,r){"use strict";r.d(t,"b",(function(){return F})),r.d(t,"a",(function(){return ee}));var n={};r.r(n),r.d(n,"registerProvider",(function(){return q})),r.d(n,"REGISTER_PROVIDER",(function(){return W}));var s={};r.r(s),r.d(s,"getProviders",(function(){return Y}));var c=r("QILm"),i=r.n(c),u=r("pVnL"),o=r.n(u),a=r("J4zp"),l=r.n(a),d=r("GRId"),p=r("55Ip"),b=r("Ty5D"),f=r("LhCv"),g=r("YLtl"),O=r("tI+e"),m=r("l3Sj"),h=r("1ZqX"),j=r("K9lf"),v=r("RxS6"),y=r("gdqT"),E=r("ppSj"),_=r("49++"),S=r("lwsE"),x=r.n(S),k=r("W8MJ"),I=r.n(k),G=r("tmk3"),w=r.n(G),L=r("92Nh"),N=r.n(L);function R(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,c=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw c}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=new WeakMap,P=new WeakMap,A=new WeakMap,C=new WeakMap,U=new WeakMap,M=function(){function e(t,r){x()(this,e),D.set(this,{writable:!0,value:void 0}),P.set(this,{writable:!0,value:void 0}),A.set(this,{writable:!0,value:void 0}),C.set(this,{writable:!0,value:void 0}),U.set(this,{writable:!0,value:void 0}),N()(this,D,t),N()(this,P,r),N()(this,A,r.select(ee).getProviders()),this._prepare()}return I()(e,[{key:"_prepare",value:function(){var e=this;N()(this,U,w()(this,D).split(/\s+/g).map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})));var t=w()(this,D).endsWith(" ");N()(this,C,new RegExp(w()(this,U).map((function(r,n){return n+1!==w()(e,U).length||t?"(?=.*\\b".concat(Object(g.escapeRegExp)(r),"\\b)"):"(?=.*\\b".concat(Object(g.escapeRegExp)(r),")")})).join("")+".+","gi"))}},{key:"_stringMatch",value:function(e){return e&&w()(this,C).test(e)}},{key:"_keywordMatch",value:function(e){var t=this;return!(!e||!e.length)&&e.some((function(e){return w()(t,U).some((function(r,n){return e.includes(" ")?t._stringMatch(e):n===w()(t,U).length-1?e.startsWith(r):r===e}))}))}},{key:"getResults",value:function(){var e=this;if(w()(this,D).length<3)return[{},0];var t,r=0,n=[],s={stringMatch:function(t){return e._stringMatch(t)},keywordMatch:function(t){return e._keywordMatch(t)}},c=R(w()(this,A));try{for(c.s();!(t=c.n()).done;){var i=t.value,u={title:i.title,items:[],groups:{}};r+=i.callback({evaluate:s,results:u,registry:w()(this,P)}),!u.items.length&&Object(g.isEmpty)(u.groups)||n.push(u)}}catch(e){c.e(e)}finally{c.f()}return[n,r]}}]),e}(),F=(r("YSGj"),Object(d.forwardRef)((function(e,t){var r=e.onPick,n=void 0===r?g.noop:r,s=e.showResults,c=Object(d.useState)(""),i=l()(c,2),u=i[0],a=i[1],p=Object(d.useState)(!1),b=l()(p,2),f=b[0],_=b[1],S=Object(d.useRef)(),x=Object(d.useRef)(),k=Object(d.useState)([]),I=l()(k,2),G=I[0],w=I[1],L=Object(h.useRegistry)(),N=Object(d.useCallback)((function(e){var t=new M(e,L).getResults();w(t[0]),Object(y.speak)(Object(m.sprintf)(Object(m._n)("%d result found.","%d results found.",t[1],"it-l10n-ithemes-security-pro"),t[1]))}),[L]),R=Object(j.useDebounce)(N,50),T=Object(d.useCallback)((function(e){S.current&&(e.preventDefault(),S.current.focus())}),[S]);return Object(j.useKeyboardShortcut)("/",T),Object(d.createElement)("div",o()({className:"itsec-search"},Object(E.c)((function(){return _(!1)}))),Object(d.createElement)("div",null,Object(d.createElement)(O.TextControl,{type:"search",placeholder:Object(m.__)("Search","it-l10n-ithemes-security-pro"),label:Object(m.__)("Search","it-l10n-ithemes-security-pro"),hideLabelFromVision:!0,value:u,onChange:function(e){a(e),R(e)},onFocus:function(){return _(!0)},onKeyDown:function(e){e.keyCode===v.DOWN&&(e.preventDefault(),x.current.focus())},ref:Object(E.e)([t,S])}),(f||s)&&u.length>=3&&Object(d.createElement)(B,{results:G,exitSearch:function(e){n(e),_(!1)},ref:x,onPick:n})))}))),B=Object(d.forwardRef)((function(e,t){var r=e.results,n=e.exitSearch,s=e.onPick,c=Object(d.useRef)();Object(d.useImperativeHandle)(t,(function(){return{focus:function(){c.current.focus()}}}));var i,u=Object(j.useInstanceId)(B,"itsec-search"),a=u+"__result__",p=(i=Object(b.h)(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";return i[t](Object(f.b)(e))}),h=Object(d.useState)(""),y=l()(h,2),E=y[0],S=y[1];return Object(g.isEmpty)(r)?null:Object(d.createElement)(React.Fragment,null,Object(d.createElement)(O.VisuallyHidden,{id:u+"__label"},Object(m.__)("Search Results","it-l10n-ithemes-security-pro")),Object(d.createElement)(_.b,{className:"itsec-search__results",id:u,active:E&&a+E,onNavigate:function(e){return S(e.substr(a.length))},onKeyDown:function(e){var t=e.keyCode;!E||t!==v.ENTER&&t!==v.SPACE||(s(E),p(E),n())},onFocus:function(){if(!E&&!Object(g.isEmpty)(r)){var e,t=l()(Object.entries(r)[0],2)[1];if(null!==(e=t.items)&&void 0!==e&&e.length)S(t.items[0].route);else if(!Object(g.isEmpty)(t.groups)){var n=l()(Object.entries(t.groups)[0],2)[1];S(n.items[0].route)}}},role:"listbox",descendantRoles:"option",ref:c,"aria-labelledby":u+"__label"},Object(g.map)(r,(function(e,t){return Object(d.createElement)(V,o()({key:t},e,{active:E,idPrefix:a,exitSearch:n}))}))))}));function V(e){var t=e.title,r=e.items,n=e.groups,s=i()(e,["title","items","groups"]),c=Object(j.useInstanceId)(B,"itsec-search__kind");return Object(d.createElement)("ul",{className:"itsec-search__kind",role:"group","aria-labelledby":c},Object(d.createElement)("li",{role:"presentation",id:c},t),(r||[]).map((function(e){return Object(d.createElement)(H,o()({key:e.route},e,s))})),Object(g.map)(n,(function(e,t){return Object(d.createElement)($,o()({key:t},e,s))})))}function $(e){var t=e.title,r=e.items,n=i()(e,["title","items"]),s=Object(j.useInstanceId)(B,"itsec-search__group");return Object(d.createElement)("ul",{className:"itsec-search__group",role:"group","aria-labelledby":s},Object(d.createElement)("li",{role:"presentation",id:s},Object(d.createElement)("span",null,t)),(r||[]).map((function(e){return Object(d.createElement)(H,o()({key:e.route},e,n))})))}function H(e){var t=e.title,r=e.description,n=e.route,s=e.active,c=e.idPrefix,i=e.exitSearch;return Object(d.createElement)("li",{className:"itsec-search__result",role:"option","aria-selected":s===n||void 0,id:c+n,"aria-label":t},Object(d.createElement)(p.a,{to:n,tabIndex:-1,onClick:function(){return i(n)}},Object(d.createElement)("span",null,t),Object(d.createElement)(_.p,{content:r,noHtml:!0,tagName:"p"})))}function q(e,t,r,n){return{type:W,slug:e,title:t,priority:r,callback:n}}var W="REGISTER_PROVIDER",K=r("pPDe"),Y=Object(K.a)((function(e){return Object(g.sortBy)(e.providers,"priority")}),(function(e){return e.providers})),z=r("lSNA"),Q=r.n(z);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){Q()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z={providers:{}};var ee="ithemes-security/search";Object(h.registerStore)(ee,{actions:n,selectors:s,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return J(J({},e),{},{providers:J(J({},e.providers),{},Q()({},t.slug,Object(g.omit)(t,["type"])))});default:return e}}})},RxS6:function(e,t){!function(){e.exports=this.wp.keycodes}()},TMLI:function(e,t,r){},Tqx9:function(e,t){!function(){e.exports=this.wp.primitives}()},TvNi:function(e,t){!function(){e.exports=this.wp.plugins}()},XO7p:function(e,t,r){},Y0od:function(e,t,r){},YLtl:function(e,t){!function(){e.exports=this.lodash}()},YSGj:function(e,t,r){},ZRc3:function(e,t,r){},cDcd:function(e,t){!function(){e.exports=this.React}()},epig:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"editGroup",(function(){return Ze})),r.d(n,"saveGroup",(function(){return et})),r.d(n,"saveGroups",(function(){return tt})),r.d(n,"resetEdits",(function(){return rt})),r.d(n,"resetAllEdits",(function(){return nt})),r.d(n,"markGroupForDeletion",(function(){return st})),r.d(n,"deleteGroup",(function(){return ct})),r.d(n,"deleteLocalGroups",(function(){return it})),r.d(n,"createLocalGroup",(function(){return ut})),r.d(n,"editGroupSetting",(function(){return ot})),r.d(n,"saveGroupSettings",(function(){return at})),r.d(n,"saveGroupSettingsAsBatch",(function(){return lt})),r.d(n,"bulkEditGroupSetting",(function(){return dt})),r.d(n,"resetBulkGroupSettingEdit",(function(){return pt})),r.d(n,"resetBulkGroupSettingEdits",(function(){return bt})),r.d(n,"saveBulkEdits",(function(){return ft})),r.d(n,"saveGroupAndSettings",(function(){return gt})),r.d(n,"applyDefaultGroupSettings",(function(){return Ot})),r.d(n,"createDefaultGroups",(function(){return mt})),r.d(n,"SET_GROUP_ERROR",(function(){return ht})),r.d(n,"SET_BULK_ERRORS",(function(){return jt})),r.d(n,"EDIT_GROUP",(function(){return vt})),r.d(n,"RESET_EDITS",(function(){return yt})),r.d(n,"RESET_ALL_EDITS",(function(){return Et})),r.d(n,"CREATE_LOCAL_GROUP",(function(){return _t})),r.d(n,"DELETE_LOCAL_GROUP",(function(){return St})),r.d(n,"DELETE_LOCAL_GROUPS",(function(){return xt})),r.d(n,"MARK_GROUP_FOR_DELETION",(function(){return kt})),r.d(n,"START_SAVE_GROUP",(function(){return It})),r.d(n,"FINISH_SAVE_GROUP",(function(){return Gt})),r.d(n,"FAILED_SAVE_GROUP",(function(){return wt})),r.d(n,"EDIT_GROUP_SETTING",(function(){return Lt})),r.d(n,"RESET_GROUP_SETTING",(function(){return Nt})),r.d(n,"START_SAVE_GROUP_SETTINGS",(function(){return Rt})),r.d(n,"FINISH_SAVE_GROUP_SETTINGS",(function(){return Tt})),r.d(n,"FAILED_SAVE_GROUP_SETTINGS",(function(){return Dt})),r.d(n,"BULK_EDIT_GROUP_SETTING",(function(){return Pt})),r.d(n,"RESET_BULK_GROUP_SETTING_EDIT",(function(){return At})),r.d(n,"RESET_BULK_GROUP_SETTING_EDITS",(function(){return Ct}));var s={};r.r(s),r.d(s,"getLocalGroupIds",(function(){return Mt})),r.d(s,"isLocalGroup",(function(){return Ft})),r.d(s,"getMatchableType",(function(){return Bt})),r.d(s,"isSavingGroupOrSettings",(function(){return Vt})),r.d(s,"getEditedGroup",(function(){return $t})),r.d(s,"getEditedGroupAttribute",(function(){return Ht})),r.d(s,"getEditedMatchableLabel",(function(){return qt})),r.d(s,"hasEdits",(function(){return Wt})),r.d(s,"getDirtyGroups",(function(){return Kt})),r.d(s,"settingHasEdits",(function(){return Yt})),r.d(s,"getGroupSettingsEdits",(function(){return zt})),r.d(s,"getEditedGroupSettings",(function(){return Xt})),r.d(s,"getEditedGroupSetting",(function(){return Jt})),r.d(s,"getEditedGroupsBySetting",(function(){return Zt})),r.d(s,"getDirtyGroupSettings",(function(){return er})),r.d(s,"isDirty",(function(){return tr})),r.d(s,"hasBulkSettingEdits",(function(){return rr})),r.d(s,"getBulkSettingEdits",(function(){return nr})),r.d(s,"getBulkSettingEdit",(function(){return sr})),r.d(s,"getBulkSettingValue",(function(){return cr})),r.d(s,"isSavingBulkEdits",(function(){return ir})),r.d(s,"getAvailableGroups",(function(){return ur})),r.d(s,"getMatchableNavIds",(function(){return ar})),r.d(s,"getGroupsMarkedForDeletion",(function(){return lr})),r.d(s,"getError",(function(){return dr})),r.d(s,"getBulkErrorsList",(function(){return pr}));var c={};r.r(c),r.d(c,"getAvailableGroups",(function(){return fr}));var i=r("GRId"),u=r("l3Sj"),o=r("TvNi"),a=(r("onLe"),r("z1rk")),l=(r("sPxh"),r("on51"));function d(){return Object(i.createElement)(x,null)}var p=r("J4zp"),b=r.n(p),f=r("yXPU"),g=r.n(f),O=r("o0o1"),m=r.n(O),h=r("Ty5D"),j=r("55Ip"),v=r("TZi5"),y=r("1ZqX"),E=r("tI+e"),_=r("49++"),S=r("ppSj");r("GjY+");function x(){var e=Object(h.k)(),t=e.url,r=e.path,n=e.isExact,s=Object(h.i)(),c=s.hash,o=s.search,a=Object(h.j)().root,d=Object(l.useNavigateTo)(),p=Object(y.useSelect)((function(e){return e("ithemes-security/user-groups-editor").getMatchableNavIds()})),b=Object(y.useDispatch)("ithemes-security/user-groups-editor").createLocalGroup;if(null===p)return null;var f=function(){var e=g()(m.a.mark((function e(){var r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:r=e.sent,n=r.id,d("".concat(t,"/").concat(n,"/edit"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.createElement)(React.Fragment,null,!n&&Object(i.createElement)(I,{navIds:p,url:t,search:o,hash:c}),Object(i.createElement)(h.d,null,Object(i.createElement)(h.b,{path:"".concat(r,"/multi")},Object(i.createElement)(w,{navIds:p})),Object(i.createElement)(h.b,{path:"".concat(r,"/:child")},Object(i.createElement)(l.NavigationFill,null,Object(i.createElement)(E.Button,{isLink:!0,onClick:f,className:"itsec-add-new-user-group-link"},Object(u.__)("New Group","it-l10n-ithemes-security-pro"))),Object(i.createElement)(G,{root:a})),Object(i.createElement)(h.b,{path:r},p.length>0&&("onboard"===a?Object(i.createElement)(k,null):Object(i.createElement)(h.a,{to:"".concat(t,"/").concat(p[0],"/").concat(o).concat(c)})))))}function k(){var e=Object(h.j)().root,t=Object(y.useSelect)((function(e){return e(a.MODULES_STORE_NAME).getModule("user-groups")||{}})).help,r=Object(l.useNavigateTo)(),n=Object(y.useRegistry)(),s=Object(y.useDispatch)("ithemes-security/user-groups-editor"),c=s.applyDefaultGroupSettings,o=s.createDefaultGroups,d=function(){var t=n.select("ithemes-security/user-groups-editor").getMatchableNavIds();r("/".concat(e,"/user-groups/").concat(t[0]))},p=function(){var e=g()(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:d();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=g()(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return e.next=4,c();case 4:d();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.createElement)(React.Fragment,null,Object(i.createElement)(L,null),Object(i.createElement)(l.PageHeader,{title:Object(u.__)("User Groups","it-l10n-ithemes-security-pro"),subtitle:Object(u.__)("User Groups allow you to enable security features for specific sets of users.","it-l10n-ithemes-security-pro"),description:Object(u.__)("Default groups automatically categorize your users by their WordPress capabilities and enable the recommended security settings for each group. Alternatively, start from scratch with custom groups and categorize your users any way you like.","it-l10n-ithemes-security-pro")+" "+Object(u.__)("User Groups won’t change a user’s capabilities, only iThemes Security features are impacted.","it-l10n-ithemes-security-pro"),help:t}),Object(i.createElement)(_.q,{hasBorder:!0,recommended:!0,messages:Object(u.__)("Recommended: Default User Groups are the simplest way to get started with iThemes Security.","it-l10n-ithemes-security-pro")}),Object(i.createElement)("div",{className:"itsec-user-groups-intro"},Object(i.createElement)(l.SelectableCard,{onClick:b,icon:"groups",title:Object(u.__)("Default","it-l10n-ithemes-security-pro"),description:Object(u.__)("Continue with default groups","it-l10n-ithemes-security-pro"),direction:"vertical",recommended:!0}),Object(i.createElement)(l.SelectableCard,{onClick:p,icon:"edit",title:Object(u.__)("Custom","it-l10n-ithemes-security-pro"),description:Object(u.__)("Create custom groups","it-l10n-ithemes-security-pro"),direction:"vertical"})))}function I(e){var t=e.navIds,r=e.url,n=e.search,s=e.hash,c=Object(y.useSelect)((function(e){return t.map(e("ithemes-security/user-groups-editor").getEditedMatchableLabel)}),[t]),o=t.map((function(e,t){return{title:c[t]||Object(u.__)("Untitled","it-l10n-ithemes-security-pro"),to:"".concat(r,"/").concat(e).concat(n).concat(s),id:e}}));return Object(i.createElement)(l.ChildPages,{pages:o})}function G(e){var t=e.root,r=Object(h.j)().child,n=Object(l.useNavigation)(),s=n.previous,c=n.next,o=n.nextPage;return Object(i.createElement)(React.Fragment,null,Object(i.createElement)(L,null),Object(i.createElement)(D,{groupId:r,showSave:"settings"===t}),"settings"!==t&&Object(i.createElement)(E.Flex,null,s&&Object(i.createElement)(E.FlexItem,null,Object(i.createElement)(j.a,{component:Object(S.j)(E.Button),isTertiary:!0,type:"button",to:s},Object(u.__)("Back","it-l10n-ithemes-security-pro"))),Object(i.createElement)(_.j,null),c&&Object(i.createElement)(React.Fragment,null,Object(i.createElement)(E.FlexItem,null,Object(i.createElement)(j.a,{component:Object(S.j)(E.Button),isPrimary:!0,to:c},Object(u.__)("Next","it-l10n-ithemes-security-pro"))),Object(i.createElement)(E.FlexItem,null,Object(i.createElement)(j.a,{component:Object(S.j)(E.Button),isPrimary:!0,to:o,text:Object(u.__)("Skip User Groups","it-l10n-ithemes-security-pro"),icon:"arrow-right-alt",iconPosition:"right",className:"itsec-button-icon-right"})))))}function w(e){var t=e.navIds,r=Object(v.e)("id",Object(v.g)(v.a,[])),n=b()(r,2),s=n[0],c=n[1],u=Object(v.e)("all",v.b),o=b()(u,2),a=o[0],l=o[1];return Object(i.useEffect)((function(){a&&(c(t),l(void 0))}),[c,a,l,t]),Object(i.createElement)(A,{groupIds:s})}function L(){var e=Object(h.k)(),t=Object(y.useSelect)((function(e){return e(a.MODULES_STORE_NAME).getModule("user-groups")||{}})).help;return Object(i.createElement)(l.HelpFill,null,Object(i.createElement)(l.PageHeader,{title:Object(u.__)("User Groups","it-l10n-ithemes-security-pro"),description:t,breadcrumbs:Object(i.createElement)(l.Breadcrumbs,{title:Object(u.__)("Help","it-l10n-ithemes-security-pro"),match:e})}),Object(i.createElement)(_.k,{topic:"user-groups"}))}var N=r("YLtl"),R=r("Mmq9"),T=r("TXkB");r("Y0od");function D(e){var t=e.groupId,r=e.showSave,n=Object(h.i)(),s=n.hash,c=n.search,o=Object(R.getQueryArg)(c,"module"),a=Object(h.k)(),l=a.url,d=a.path,p=Object(y.useSelect)((function(e){return{type:e("ithemes-security/user-groups-editor").getMatchableType(t),isDirty:e("ithemes-security/user-groups-editor").isDirty(t),isSaving:e("ithemes-security/user-groups-editor").isSavingGroupOrSettings(t),notFound:e("ithemes-security/user-groups").isGroupNotFound(t)}}),[t]),b=p.type,f=p.isDirty,g=p.isSaving,O=p.notFound,m=Object(y.useDispatch)("ithemes-security/user-groups-editor"),j=m.saveGroupAndSettings,v=m.resetEdits,S=Object(i.useMemo)((function(){return[{name:"settings",title:Object(u.__)("Features","it-l10n-ithemes-security-pro"),className:"itsec-manage-user-group-tabs__tab",Component:J},"user-group"===b&&{name:"edit",title:Object(u.__)("Edit Group","it-l10n-ithemes-security-pro"),className:"itsec-manage-user-group-tabs__tab",Component:$}].filter(N.isPlainObject)}),[b]);return O?Object(i.createElement)(React.Fragment,null,Object(i.createElement)(_.q,{type:"error",title:Object(u.__)("No Group Found","it-l10n-ithemes-security-pro"),messages:[Object(u.__)("No user group was found with the requested id.","it-l10n-ithemes-security-pro")]}),Object(i.createElement)("div",{style:{maxWidth:"20rem",margin:"0 auto",display:"block"}},Object(i.createElement)(T.k,null))):Object(i.createElement)(React.Fragment,null,Object(i.createElement)(fe,{groupId:t,moduleFilter:o}),Object(i.createElement)(h.d,null,Object(i.createElement)(h.b,{path:"".concat(d,"/:tab")},g?Object(i.createElement)(E.Disabled,null,Object(i.createElement)(P,{groupId:t,base:l,tabs:S,moduleFilter:o})):Object(i.createElement)(P,{groupId:t,base:l,tabs:S,highlight:s.substr(1),moduleFilter:o})),Object(i.createElement)(h.b,{path:d},Object(i.createElement)(h.a,{to:"".concat(l,"/").concat(S[0].name,"/").concat(c).concat(s)}))),r&&Object(i.createElement)(E.Flex,null,Object(i.createElement)(_.j,null),Object(i.createElement)(E.FlexItem,null,Object(i.createElement)(E.Button,{isSecondary:!0,onClick:function(){return v(t)},disabled:!f},Object(u.__)("Undo Changes","it-l10n-ithemes-security-pro"))),Object(i.createElement)(E.FlexItem,null,Object(i.createElement)(E.Button,{isPrimary:!0,onClick:function(){return j(t)},isBusy:g,disabled:g||!f},Object(u.__)("Save","it-l10n-ithemes-security-pro")))))}function P(e){var t=e.groupId,r=e.base,n=e.tabs,s=e.highlight,c=e.moduleFilter,o=Object(h.k)(),a=o.url,d=o.params.tab,p=Object(l.useNavigateTo)(),b=Object(y.useSelect)((function(e){return e("ithemes-security/user-groups-editor").getError(t)}));return c?Object(i.createElement)(E.Card,null,Object(i.createElement)(E.CardHeader,{className:"itsec-user-groups-filtered-features"},Object(i.createElement)(j.a,{to:a,component:Object(S.j)(E.Button),icon:"arrow-left",text:Object(u.__)("All Features","it-l10n-ithemes-security-pro"),isLink:!0})),Object(i.createElement)(J,{moduleFilter:c,groupId:t,highlight:s},Object(i.createElement)(_.i,{apiError:b}))):Object(i.createElement)(E.Card,null,Object(i.createElement)(_.g,{tabs:n,isStyled:!0,selected:d,onSelect:function(e){p("".concat(r,"/").concat(e),"replace")}},(function(e){var r=e.Component;return Object(i.createElement)(r,{groupId:t,highlight:s},Object(i.createElement)(_.i,{apiError:b}))})))}function A(e){var t=e.groupIds,r=e.showSave,n=void 0===r||r,s=Object(y.useSelect)((function(e){return{isDirty:e("ithemes-security/user-groups-editor").hasBulkSettingEdits(),isSaving:e("ithemes-security/user-groups-editor").isSavingBulkEdits(t),errors:e("ithemes-security/user-groups-editor").getBulkErrorsList()}})),c=s.isDirty,o=s.isSaving,a=s.errors,l=Object(y.useDispatch)("ithemes-security/user-groups-editor"),d=l.saveBulkEdits,p=l.resetBulkGroupSettingEdits,b=Object(i.useMemo)((function(){return[{name:"settings",title:Object(u.__)("Features","it-l10n-ithemes-security-pro"),className:"itsec-manage-user-group-tabs__tab",Component:ee}]}));return Object(i.createElement)(React.Fragment,null,Object(i.createElement)(ge,{groupIds:t}),Object(i.createElement)(E.Card,null,Object(i.createElement)(_.y,{tabs:b,isStyled:!0},(function(e){var r=e.Component;return Object(i.createElement)(r,{groupIds:t},Object(i.createElement)(_.i,{errors:a}))}))),n&&Object(i.createElement)(E.Flex,null,Object(i.createElement)(_.j,null),Object(i.createElement)(E.FlexItem,null,Object(i.createElement)(E.Button,{isSecondary:!0,onClick:function(){return p(t)},disabled:!c},Object(u.__)("Undo Changes","it-l10n-ithemes-security-pro"))),Object(i.createElement)(E.FlexItem,null,Object(i.createElement)(E.Button,{isPrimary:!0,onClick:function(){return d(t)},isBusy:o,disabled:o||!c},Object(u.__)("Save","it-l10n-ithemes-security-pro")))))}var C=r("K9lf");r("QmYb");var U=Object(C.compose)([Object(y.withSelect)((function(e,t){var r=t.groupId;return{label:e("ithemes-security/user-groups-editor").getEditedGroupAttribute(r,"label")||""}})),Object(y.withDispatch)((function(e,t){var r=t.groupId;return{edit:function(t){return e("ithemes-security/user-groups-editor").editGroup(r,t)}}}))])((function(e){var t=e.label,r=e.edit,n=e.disabled,s=void 0!==n&&n;return Object(i.createElement)(E.TextControl,{label:Object(u.__)("Group Name","it-l10n-ithemes-security-pro"),value:t,maxLength:50,disabled:s,onChange:function(e){return r({label:e})}})})),M=r("lSNA"),F=r.n(M),B=r("TSYQ"),V=r.n(B);r("ZRc3");Object(C.compose)([Object(y.withSelect)((function(e){return{hasEdits:e("ithemes-security/user-groups-editor").hasEdits("new"),isSaving:e("ithemes-security/user-groups-editor").isCreating("new")}})),Object(y.withDispatch)((function(e){return{save:function(){e("ithemes-security/user-groups-editor").createGroup()}}}))])((function(e){var t=e.hasEdits,r=e.save,n=e.isSaving;return Object(i.createElement)(React.Fragment,null,Object(i.createElement)(E.CardBody,{className:"itsec-user-groups-group-tab__edit-fields"},Object(i.createElement)(Oe,{groupId:"new"})),Object(i.createElement)(E.CardFooter,null,Object(i.createElement)(_.j,null),Object(i.createElement)(E.FlexItem,null,Object(i.createElement)(E.Button,{disabled:!t,isPrimary:!0,onClick:r,isBusy:n},Object(u.__)("Create","it-l10n-ithemes-security-pro")))))}));var $=Object(C.compose)([Object(y.withSelect)((function(e,t){var r=t.groupId;return{isLoading:e("core/data").isResolving("ithemes-security/user-groups","getGroup",[r])||e("core/data").isResolving("ithemes-security/core","getIndex")}}))])((function(e){var t=e.groupId,r=e.isLoading,n=e.children,s=Object(i.createElement)(React.Fragment,null,Object(i.createElement)(E.CardBody,{className:"itsec-user-groups-group-tab__edit-fields"},n,Object(i.createElement)(Oe,{groupId:t,disabled:r})));return r?Object(i.createElement)(E.Disabled,null,s):s})),H=r("eDuk"),q=r.n(H),W=r("RUGT");function K(){return K.instance||(K.instance=new q.a({schemaId:"id"}),K.instance.addMetaSchema(r("3jBn"))),K.instance}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=K();return Object(y.useSelect)((function(r){return r("ithemes-security/user-groups").getSettingDefinitions(t,e)}),[t,e])}function z(){var e=Object(y.useDispatch)(l.ONBOARD_STORE_NAME).registerCompletionStep,t=Object(y.useDispatch)("ithemes-security/user-groups-editor"),r=t.saveGroups,n=t.saveGroupSettingsAsBatch;Object(S.g)(z,(function(){e({id:"savingUserGroups",label:Object(u.__)("Create User Groups","it-l10n-ithemes-security-pro"),priority:15,callback:function(){return r()},render:function(){var e=Object(y.useSelect)((function(e){var t=e("ithemes-security/user-groups-editor");return(t.getMatchableNavIds()||[]).map((function(e){return t.getEditedMatchableLabel(e)}))}),[]);return e.length?Object(i.createElement)(React.Fragment,null,Object(i.createElement)("p",null,Object(u.__)("The following User Groups will be created:","it-l10n-ithemes-security-pro")),Object(i.createElement)("ul",null,e.map((function(e,t){return Object(i.createElement)("li",{key:t},e)})))):Object(i.createElement)("p",null,Object(u.__)("No User Groups have been created.","it-l10n-ithemes-security-pro"))}}),e({id:"savingUserGroupsSetting",label:Object(u.__)("Setup User Group Settings","it-l10n-ithemes-security-pro"),priority:20,callback:function(){return n()},render:function(){var e=Y(),t=Object(y.useSelect)((function(e){var t=e("ithemes-security/user-groups-editor"),r=t.getMatchableNavIds()||[];return{ids:r,labels:Object(N.zipObject)(r,r.map((function(e){return t.getEditedMatchableLabel(e)}))),settings:Object(N.zipObject)(r,r.map((function(e){return t.getEditedGroupSettings(e)})))}}),[]),r=t.ids,n=t.labels,s=t.settings;return r.length?Object(i.createElement)(React.Fragment,null,Object(i.createElement)("p",null,Object(u.__)("The following features will be enabled for each User Group:","it-l10n-ithemes-security-pro")),Object(i.createElement)("ul",{className:"itsec-secure-site-user-groups-settings-panel"},r.map((function(t){var r=e.flatMap((function(e){var r;return null!==(r=s[t])&&void 0!==r&&r[e.id]?Object(N.reduce)(e.settings,(function(r,n,c){return!0===s[t][e.id][c]&&r.push(n.title),r}),[]):[]}));return r.length?Object(i.createElement)("li",{key:t},Object(i.createElement)("strong",null,n[t]),Object(i.createElement)("ul",null,r.map((function(e,t){return Object(i.createElement)("li",{key:t},e)})))):Object(i.createElement)("li",{key:t},Object(u.sprintf)(Object(u.__)("%s: None","it-l10n-ithemes-security-pro"),n[t]))})))):Object(i.createElement)("p",null,Object(u.__)("No User Groups have been created.","it-l10n-ithemes-security-pro"))}})}))}function Q(){var e=Object(y.useDispatch)(W.a).registerProvider;Object(S.g)(Q,(function(){e("user-group-settings",Object(u.__)("User Group Settings","it-l10n-ithemes-security-pro"),25,(function(e){var t=e.registry,r=e.evaluate,n=e.results;return t.select("ithemes-security/user-groups").getSettingDefinitions(K()).reduce((function(e,t){return Object(N.reduce)(t.settings,(function(e,s,c){var i,u,o;return r.stringMatch(s.title)||r.stringMatch(s.description)||r.keywordMatch(s.keywords)?(null!==(o=(i=n.groups)[u=t.id])&&void 0!==o||(i[u]={title:t.title,items:[]}),n.groups[t.id].items.push({title:s.title,description:s.description,route:"/settings/user-groups?module=".concat(t.id,"#").concat(t.id,"/").concat(c)}),e++):e}),e)}),0)})),e("user-groups",Object(u.__)("User Groups","it-l10n-ithemes-security-pro"),50,(function(e){var t=e.registry,r=e.evaluate,n=e.results;return(t.select("ithemes-security/user-groups-editor").getAvailableGroups()||[]).reduce((function(e,t){return r.stringMatch(t.label)?(n.items.push({title:t.label,description:t.description,route:"/settings/user-groups/".concat(t.id)}),e++):e}),0)}))}))}var X=Object(C.compose)([Object(y.withSelect)((function(e,t){var r=t.groupId,n=t.module,s=t.setting;return{value:e("ithemes-security/user-groups-editor").getEditedGroupSetting(r,n,s)}})),Object(y.withDispatch)((function(e,t){var r=t.groupId,n=t.module,s=t.setting;return{edit:function(t){return e("ithemes-security/user-groups-editor").editGroupSetting(r,n,s,t)}}}))])((function(e){var t=e.definition,r=e.value,n=e.edit,s=e.className,c=e.isHighlighted,u=e.disabled,o=void 0!==u&&u;return Object(i.createElement)(E.ToggleControl,{className:V()(s,{"itsec-highlighted-search-result":c}),checked:!0===r,label:t.title,help:t.description,disabled:o,onChange:function(e){return n(e)}})}));r("GrEf");function J(e){var t=e.groupId,r=e.highlight,n=e.moduleFilter,s=e.children,c=Y({module:n}),u=Object(y.useSelect)((function(e){var r=!1;if(!e("ithemes-security/user-groups-editor").isLocalGroup(t)){var n=e("ithemes-security/user-groups").getGroupSettings(t),s=e("ithemes-security/user-groups").isResolving("getGroupSettings",[t]);r=!n&&s}return{isLoading:r}}),[t]).isLoading,o=Object(i.createElement)(E.CardBody,null,s,Object(i.createElement)(ye,{definitions:c,settingComponent:X,groupId:t,disabled:u,highlight:r}));return u&&(o=Object(i.createElement)(E.Disabled,null,o)),Object(i.createElement)(React.Fragment,null,!n&&Object(i.createElement)(Ee,null),o)}var Z=Object(C.compose)([Object(y.withSelect)((function(e,t){var r=t.module,n=t.setting,s=t.groupIds;return{value:e("ithemes-security/user-groups-editor").getBulkSettingValue(s,r,n)}})),Object(y.withDispatch)((function(e,t){var r=t.module,n=t.setting;return{edit:function(t){return e("ithemes-security/user-groups-editor").bulkEditGroupSetting(r,n,t)}}}))])((function(e){var t=e.definition,r=e.value,n=e.edit,s=e.disabled,c=void 0!==s&&s;return Object(i.createElement)(_.d,{checked:!0===r,indeterminate:null==r,label:t.title,help:t.description,disabled:c,onChange:function(e){return n(e)}})}));function ee(e){var t=e.groupIds,r=e.children,n=Y(),s=Object(i.createElement)(E.CardBody,null,r,Object(i.createElement)(ye,{definitions:n,settingComponent:Z,groupIds:t}));return t.length||(s=Object(i.createElement)(E.Disabled,null,s)),Object(i.createElement)(React.Fragment,null,Object(i.createElement)(Ee,null),s)}Object(C.compose)([Object(y.withSelect)((function(e,t){var r=t.groupId;return{minRole:e("ithemes-security/user-groups-editor").getEditedGroupAttribute(r,"min_role")}})),Object(y.withDispatch)((function(e,t){var r=t.groupId;return{onChange:function(t){return e("ithemes-security/user-groups-editor").editGroup(r,t)}}}))])((function(e){var t=e.minRole,r=e.onChange;return Object(i.createElement)("div",null,Object(i.createElement)(E.SelectControl,{options:[{value:"administrator",label:Object(u._x)("Administrator","User role")},{value:"editor",label:Object(u._x)("Editor","User role")},{value:"author",label:Object(u._x)("Author","User role")},{value:"contributor",label:Object(u._x)("Contributor","User role")},{value:"subscriber",label:Object(u._x)("Subscriber","User role")}],label:Object(u.__)("Minimum Role","it-l10n-ithemes-security-pro"),value:t,onChange:function(e){return r({min_role:e})},help:Object(u.__)("Add users with the selected minimum role to this group. To edit roles, go to Users in your WordPress Dashboard.","it-l10n-ithemes-security-pro")}))}));var te=r("RIqP"),re=r.n(te),ne=r("4eJC"),se=r.n(ne),ce=r("Td6G"),ie=se()((function(e,t){var r=[{value:"$administrator$",label:Object(u.__)("Administrator Capabilities","it-l10n-ithemes-security-pro")},{value:"$editor$",label:Object(u.__)("Editor Capabilities","it-l10n-ithemes-security-pro")},{value:"$author$",label:Object(u.__)("Author Capabilities","it-l10n-ithemes-security-pro")},{value:"$contributor$",label:Object(u.__)("Contributor Capabilities","it-l10n-ithemes-security-pro")},{value:"$subscriber$",label:Object(u.__)("Subscriber Capabilities","it-l10n-ithemes-security-pro")}];for(var n in t&&r.unshift({value:"$super-admin$",label:Object(u.__)("Super Admin","it-l10n-ithemes-security-pro")}),Object(N.some)(e,(function(e){return""===e.canonical}))&&r.push({value:"$other$",label:Object(u.__)("Other","it-l10n-ithemes-security-pro"),selectable:!1}),e)if(e.hasOwnProperty(n)){var s=e[n],c=s.canonical,i=s.label;r.push({value:n,parent:c.length>0?"$".concat(c,"$"):"$other$",label:i})}return Object.values(r)}));var ue=Object(C.compose)([Object(y.withSelect)((function(e,t){var r=t.groupId;return{roles:e("ithemes-security/user-groups-editor").getEditedGroupAttribute(r,"roles")||[],canonical:e("ithemes-security/user-groups-editor").getEditedGroupAttribute(r,"canonical")||[],available:e("ithemes-security/core").getRoles(),schema:e("ithemes-security/core").getSchema("ithemes-security-user-group")}})),Object(y.withDispatch)((function(e,t){var r=t.groupId;return{onChange:function(t){return e("ithemes-security/user-groups-editor").editGroup(r,t)}}}))])((function(e){var t=e.canonical,r=e.roles,n=e.onChange,s=e.available,c=e.schema,o=e.disabled,a=void 0!==o&&o,l=Object(N.get)(c,["properties","canonical","items","enum"],[]).includes("super-admin"),d=[].concat(re()(r),re()(t.map((function(e){return"$".concat(e,"$")}))));return Object(i.createElement)(_.m,{label:Object(u.__)("Select Roles","it-l10n-ithemes-security-pro"),help:Object(u.__)("Add users with the selected roles to this group.","it-l10n-ithemes-security-pro"),value:d,disabled:a,options:ie(s,l),onChange:function(e){var t=Object(ce.d)(e,(function(e){return e.startsWith("$")&&e.endsWith("$")})),r=b()(t,2),s=r[0],c=r[1];n({roles:c,canonical:Object(N.without)(s.map((function(e){return e.slice(1,-1)})),"other")})}})})),oe=r("ywyh"),ae=r.n(oe);r("ELjz");function le(e){return{value:e.id,label:e.name,user:e}}var de=function(e){return new Promise((function(t,r){ae()({path:Object(R.addQueryArgs)("/wp/v2/users",{search:e,per_page:100,context:"embed",itsec_global:!0})}).then((function(e){return e.forEach(Object(y.dispatch)("ithemes-security/core").receiveUser),e})).then((function(e){return t(e.map(le))})).catch(r)}))};var pe=Object(C.compose)([Object(C.withState)({selectSearch:""}),Object(y.withSelect)((function(e,t){var r=t.groupId,n=e("ithemes-security/user-groups-editor").getEditedGroupAttribute(r,"users")||[],s=[],c=!1;return n.forEach((function(t){var r=e("ithemes-security/core").getUser(t);r?s.push(r):e("core/data").isResolving("ithemes-security/core","getUser",[t])&&(c=!0)})),{users:s,userIds:n,loading:c}})),Object(y.withDispatch)((function(e,t){var r=t.groupId;return{receiveUser:e("ithemes-security/core").receiveUser,onChange:function(t){return e("ithemes-security/user-groups-editor").editGroup(r,t)}}})),C.withInstanceId])((function(e){var t=e.instanceId,r=e.users,n=e.loading,s=e.onChange,c=e.disabled,o=void 0!==c&&c,a=e.selectSearch,l=e.setState,d="itsec-user-group-panel-users__select-".concat(t),p=n?[]:r.map(le);return Object(i.createElement)(E.BaseControl,{className:"itsec-user-group-panel-users__select-control",label:Object(u.__)("Select Users","it-l10n-ithemes-security-pro"),help:Object(u.__)("Select specific users to add to this group.","it-l10n-ithemes-security-pro"),id:d},Object(i.createElement)(_.c,{classNamePrefix:"components-itsec-async-select-control",inputId:d,isDisabled:o||n,isLoading:n,isMulti:!0,cacheOptions:!0,defaultOptions:!0,loadOptions:de,value:p,onChange:function(e){return s({users:Object(N.map)(e,"value")})},inputValue:a,onInputChange:function(e){return l({selectSearch:e})}}))})),be=r("LhCv");function fe(e){var t=e.groupId,r=e.moduleFilter,n=Object(h.j)().root,s=Object(h.i)(),c=Object(y.useSelect)((function(e){var n;return{type:e("ithemes-security/user-groups-editor").getMatchableType(t),isDeleting:e("ithemes-security/user-groups").isDeleting(t),label:e("ithemes-security/user-groups-editor").getEditedMatchableLabel(t),navIds:e("ithemes-security/user-groups-editor").getMatchableNavIds(),help:null===(n=e("ithemes-security/modules").getModule("user-groups"))||void 0===n?void 0:n.help,module:e("ithemes-security/modules").getModule(r)}}),[t,r]),o=c.type,a=c.isDeleting,d=c.label,p=c.navIds,b=c.help,f=c.module,O=Object(y.useDispatch)("ithemes-security/user-groups-editor").deleteGroup,j=Object(l.useNavigateTo)(),v=d||Object(u.__)("Untitled","it-l10n-ithemes-security-pro"),_=Object(l.useBreadcrumbTrail)((null==f?void 0:f.label)||v),S="user-group"===o,x=function(){var e=g()(m.a.mark((function e(){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:if(e.t0=e.sent,e.t1=Error,e.t0 instanceof e.t1){e.next=8;break}-1!==(s=p.findIndex((function(e){return e===t})))&&(r=s+1<p.length?s+1:s-1),j("/".concat(n,"/user-groups/").concat(p[r]||""));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.createElement)(l.PageHeader,{title:v,help:b,breadcrumbs:Object(i.createElement)(l.Breadcrumbs,{trail:Object(i.useMemo)((function(){return[].concat(re()(_),[f&&{to:Object(be.c)(s),title:f.title}]).filter(N.identity)}),[_,f])})},S&&Object(i.createElement)(E.Button,{onClick:x,isBusy:a,isLink:!0,isDestructive:!0},Object(u.__)("Delete Group","it-l10n-ithemes-security-pro")))}Object(C.compose)([Object(y.withSelect)((function(e){return{label:e("ithemes-security/user-groups-editor").getEditedGroupAttribute("new","label")}}))])((function(e){var t=e.label;return t&&t.length||(t=Object(u.__)("New Group","it-l10n-ithemes-security-pro")),Object(i.createElement)(l.PageHeader,{label:t})}));function ge(e){var t=e.groupIds,r=Object(y.useSelect)((function(e){return t.map(e("ithemes-security/user-groups-editor").getEditedMatchableLabel).join(", ")}),[t]);return Object(i.createElement)(l.PageHeader,{title:r||Object(u.__)("Select Groups","it-l10n-ithemes-security-pro")})}r("XO7p");var Oe=function(e){var t=e.groupId,r=e.disabled;return Object(i.createElement)(React.Fragment,null,Object(i.createElement)(U,{groupId:t,disabled:r}),Object(i.createElement)(ue,{groupId:t,disabled:r}),Object(i.createElement)(pe,{groupId:t,disabled:r}))},me=r("pVnL"),he=r.n(me),je=r("QILm"),ve=r.n(je);function ye(e){var t=e.highlight,r=e.definitions,n=e.settingComponent,s=ve()(e,["highlight","definitions","settingComponent"]),c=(t||"").split("/"),u=b()(c,2),o=u[0],a=u[1];return Object(i.createElement)("form",null,Object(i.createElement)("ul",{className:"itsec-user-groups-group-tab__modules-list"},Object(N.map)(r,(function(e){return!Object(N.isEmpty)(e.settings)&&Object(i.createElement)("li",{key:e.id,className:"itsec-user-groups-group-tab_settings-list"},Object(i.createElement)("h3",null,e.title),Object(N.map)(e.settings,(function(t,r){return Object(i.createElement)(n,he()({key:r,definition:t,module:e.id,setting:r,isHighlighted:e.id===o&&r===a},s))})))}))))}r("TMLI");function Ee(){var e=Object(v.e)("id",Object(v.g)(v.a,[])),t=b()(e,2),r=t[0],n=t[1],s=Object(v.e)("back"),c=b()(s,1)[0],o=Object(h.j)(),a=o.root,d=o.child,p=Object(l.useNavigateTo)(),f=Object(y.useSelect)((function(e){return{matchables:e("ithemes-security/user-groups").getMatchables()||[],isLocal:d&&e("ithemes-security/user-groups-editor").isLocalGroup(d)}}),[d]),g=f.matchables,O=f.isLocal;if("settings"!==a)return null;var m=Object(u.__)("Select multiple User Groups to edit together.","it-l10n-ithemes-security-pro");return O&&(m=Object(i.createElement)(React.Fragment,null,m,Object(i.createElement)(_.l,{help:Object(u.__)("Save the User Group first to enable multi-editing.","it-l10n-ithemes-security-pro")}))),Object(i.createElement)("div",{className:"itsec-user-groups-multi-group-selector"},Object(i.createElement)(E.CheckboxControl,{label:m,onChange:function(e){p(e?"/".concat(a,"/user-groups/multi?id=").concat(d,"&back=").concat(d):c?"/".concat(a,"/user-groups/").concat(c):"/".concat(a,"/user-groups"),"replace")},checked:!d,disabled:O}),!d&&Object(i.createElement)("fieldset",null,Object(i.createElement)(E.VisuallyHidden,{as:"legend"},Object(u.__)("User Groups","it-l10n-ithemes-security-pro")),Object(i.createElement)(_.f,{label:Object(u.__)("Select All","it-l10n-ithemes-security-pro"),checked:r.length===g.length,onChange:function(e){n(e?g.map((function(e){return e.id})):[])},className:"itsec-user-groups-multi-group-selector__select-all"}),g.map((function(e){return Object(i.createElement)(_e,{key:e.id,id:e.id,selected:r,setSelected:n})}))))}function _e(e){var t=e.id,r=e.selected,n=e.setSelected,s=Object(y.useSelect)((function(e){return{label:e("ithemes-security/user-groups-editor").getEditedMatchableLabel(t)}}),[t]).label;return Object(i.createElement)(_.f,{label:s,checked:r.includes(t),onChange:function(e){n(e?[].concat(re()(r),[t]):Object(N.without)(r,t),"replaceIn")}})}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){F()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];return{type:"DISPATCH",storeKey:e,actionName:t,args:n}}function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"info",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:"CREATE_NOTICE",status:e,content:t,options:xe({context:"ithemes-security"},r)}}var Ge,we={API_FETCH:function(e){var t=e.request;return ae()(t).catch(ce.m)},SELECT:function(e){var t,r=e.storeKey,n=e.selectorName,s=e.args;return(t=Object(y.select)(r))[n].apply(t,re()(s))},DISPATCH:function(e){var t,r=e.storeKey,n=e.actionName,s=e.args;return(t=Object(y.dispatch)(r))[n].apply(t,re()(s))},CREATE_NOTICE:function(e){var t=e.status,r=e.content,n=e.options;n.autoDismiss&&(n.id=n.id||Object(N.uniqueId)("itsec-auto-dismiss-"),setTimeout((function(){return Object(y.dispatch)("core/notices").removeNotice(n.id,n.context)}),n.autoDismiss)),Object(y.dispatch)("core/notices").createNotice(t,r,n)}},Le=new Uint8Array(16);function Ne(){if(!Ge&&!(Ge="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ge(Le)}var Re=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Te=function(e){return"string"==typeof e&&Re.test(e)},De=[],Pe=0;Pe<256;++Pe)De.push((Pe+256).toString(16).substr(1));var Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(De[e[t+0]]+De[e[t+1]]+De[e[t+2]]+De[e[t+3]]+"-"+De[e[t+4]]+De[e[t+5]]+"-"+De[e[t+6]]+De[e[t+7]]+"-"+De[e[t+8]]+De[e[t+9]]+"-"+De[e[t+10]]+De[e[t+11]]+De[e[t+12]]+De[e[t+13]]+De[e[t+14]]+De[e[t+15]]).toLowerCase();if(!Te(r))throw TypeError("Stringified UUID is invalid");return r};var Ce=function(e,t,r){var n=(e=e||{}).random||(e.rng||Ne)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=n[s];return t}return Ae(n)};function Ue(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,c=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw c}}}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fe=m.a.mark(Ze),Be=m.a.mark(et),Ve=m.a.mark(tt),$e=m.a.mark(ct),He=m.a.mark(ot),qe=m.a.mark(at),We=m.a.mark(lt),Ke=m.a.mark(ft),Ye=m.a.mark(gt),ze=m.a.mark(Ot),Qe=m.a.mark(mt);function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){F()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ze(e,t){var r,n,s,c,i;return m.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,y.controls.select("ithemes-security/user-groups-editor","isLocalGroup",e);case 2:if(r=u.sent,u.t0=!r,!u.t0){u.next=8;break}return u.next=7,y.controls.select("ithemes-security/user-groups","getGroup",e);case 7:u.t0=u.sent;case 8:return n=u.t0,u.next=11,y.controls.select("ithemes-security/user-groups-editor","getEditedGroup",e);case 11:return s=u.sent,c=Je(Je({},s||{}),t),i=Object(N.pickBy)(c,(function(e,t){return!Object(N.isEqual)(null==n?void 0:n[t],e)})),u.next=16,{type:vt,id:e,edit:i};case 16:case"end":return u.stop()}}),Fe)}function et(e){var t,r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.controls.select("ithemes-security/user-groups-editor","getEditedGroup",e);case 2:if(t=n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,{type:It,id:e};case 7:return n.next=9,y.controls.select("ithemes-security/user-groups-editor","isLocalGroup",e);case 9:if(!n.sent){n.next=15;break}return n.next=12,y.controls.dispatch("ithemes-security/user-groups","createGroup",Je(Je({},t),{},{id:e}));case 12:r=n.sent,n.next=18;break;case 15:return n.next=17,y.controls.dispatch("ithemes-security/user-groups","updateGroup",e,t);case 17:r=n.sent;case 18:if(!(r instanceof Error)){n.next=23;break}return n.next=21,{type:wt,id:e,error:r};case 21:n.next=27;break;case 23:return n.next=25,{type:Gt,id:e,updated:r};case 25:return n.next=27,Ie("success",Object(u.__)("Saved group.","it-l10n-ithemes-security-pro"),{type:"snackbar"});case 27:return n.abrupt("return",r);case 28:case"end":return n.stop()}}),Be)}function tt(){var e,t,r,n,s,c,i,o,a,l,d,p,f,g,O,h,j=arguments;return m.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return e=!(j.length>0&&void 0!==j[0])||j[0],m.next=3,y.controls.select("ithemes-security/user-groups-editor","getLocalGroupIds");case 3:return t=m.sent,m.next=6,y.controls.select("ithemes-security/user-groups-editor","getGroupsMarkedForDeletion");case 6:if(r=m.sent,!0!==e){m.next=23;break}return m.t0=re.a,m.t1=Set,m.t2=[],m.t3=re.a,m.next=14,y.controls.select("ithemes-security/user-groups-editor","getDirtyGroups");case 14:m.t4=m.sent,m.t5=(0,m.t3)(m.t4),m.t6=re()(t),m.t7=re()(r),m.t8=m.t2.concat.call(m.t2,m.t5,m.t6,m.t7),m.t9=new m.t1(m.t8),e=(0,m.t0)(m.t9),m.next=24;break;case 23:Object(N.isString)(e)&&(e=[e]);case 24:if(e.length){m.next=26;break}return m.abrupt("return",[]);case 26:n=[],s=[],c=[],i=Ue(e),m.prev=30,i.s();case 32:if((o=i.n()).done){m.next=40;break}return a=o.value,m.next=36,y.controls.select("ithemes-security/user-groups-editor","getEditedGroup",a);case 36:l=m.sent,r.includes(a)?c.push(a):t.includes(a)?s.push(Je(Je({},l),{},{id:a})):n.push(Je(Je({},l),{},{id:a}));case 38:m.next=32;break;case 40:m.next=45;break;case 42:m.prev=42,m.t10=m.catch(30),i.e(m.t10);case 45:return m.prev=45,i.f(),m.finish(45);case 48:return m.next=50,y.controls.dispatch("ithemes-security/user-groups","saveGroups",{create:s,update:n,delete:c});case 50:if(!((d=m.sent)instanceof Error)){m.next=55;break}return m.next=54,Ie("error",Object(u.sprintf)(Object(u.__)("Could not save user groups: %s","it-l10n-ithemes-security-pro"),d.message));case 54:return m.abrupt("return",d);case 55:p=0,f=Object.entries(d.byId);case 56:if(!(p<f.length)){m.next=68;break}if(g=b()(f[p],2),O=g[0],!((h=g[1]).status>=400)){m.next=63;break}return m.next=61,{type:wt,id:O,error:h.body};case 61:m.next=65;break;case 63:return m.next=65,{type:Gt,id:O,updated:h.body};case 65:p++,m.next=56;break;case 68:return m.next=70,Ie("success",Object(u.__)("Saved user groups.","it-l10n-ithemes-security-pro"),{type:"snackbar"});case 70:return m.abrupt("return",d);case 71:case"end":return m.stop()}}),Ve,null,[[30,42,45,48]])}function rt(e){return{type:yt,id:e}}function nt(){return{type:Et}}function st(e){return{type:kt,id:e}}function ct(e){var t;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.controls.select("ithemes-security/user-groups-editor","isLocalGroup",e);case 2:if(!r.sent){r.next=8;break}return r.next=6,{type:St,id:e};case 6:r.next=15;break;case 8:return r.next=10,y.controls.dispatch("ithemes-security/user-groups","deleteGroup",e);case 10:if(!((t=r.sent)instanceof Error)){r.next=15;break}return r.next=14,{type:ht,id:e,error:t};case 14:return r.abrupt("return",t);case 15:return r.next=17,rt(e);case 17:return r.next=19,{type:ht,id:e,error:null};case 19:case"end":return r.stop()}}),$e)}function it(){return{type:xt}}function ut(e){return{type:_t,id:e||Ce()}}function ot(e,t,r,n){var s,c;return m.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,y.controls.select("ithemes-security/user-groups-editor","isLocalGroup",e);case 2:if(s=i.sent,i.t0=!s,!i.t0){i.next=8;break}return i.next=7,y.controls.select("ithemes-security/user-groups","getGroupSetting",e,t,r);case 7:i.t0=i.sent;case 8:if(c=i.t0,!Object(N.isEqual)(c,n)){i.next=14;break}return i.next=12,{type:Nt,id:e,module:t,setting:r};case 12:i.next=16;break;case 14:return i.next=16,{type:Lt,id:e,module:t,setting:r,value:n};case 16:case"end":return i.stop()}}),He)}function at(e){var t,r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.controls.select("ithemes-security/user-groups-editor","getGroupSettingsEdits",e);case 2:if(t=n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,{type:Rt,id:e};case 7:return n.next=9,y.controls.dispatch("ithemes-security/user-groups","updateGroupSettings",e,t);case 9:if(!((r=n.sent)instanceof Error)){n.next=15;break}return n.next=13,{type:Dt,id:e,error:r};case 13:n.next=19;break;case 15:return n.next=17,{type:Tt,id:e,updated:r};case 17:return n.next=19,Ie("success",Object(u.__)("Updated group settings.","it-l10n-ithemes-security-pro"),{type:"snackbar"});case 19:return n.abrupt("return",r);case 20:case"end":return n.stop()}}),qe)}function lt(){var e,t,r,n,s,c,i,o,a,l,d,p=arguments;return m.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(!0!==(e=!(p.length>0&&void 0!==p[0])||p[0])){f.next=7;break}return f.next=4,y.controls.select("ithemes-security/user-groups-editor","getDirtyGroupSettings");case 4:e=f.sent,f.next=8;break;case 7:Object(N.isString)(e)&&(e=[e]);case 8:if(e.length){f.next=10;break}return f.abrupt("return",{responses:[],byId:{}});case 10:t={},r=Ue(e),f.prev=12,r.s();case 14:if((n=r.n()).done){f.next=21;break}return s=n.value,f.next=18,y.controls.select("ithemes-security/user-groups-editor","getGroupSettingsEdits",s);case 18:t[s]=f.sent;case 19:f.next=14;break;case 21:f.next=26;break;case 23:f.prev=23,f.t0=f.catch(12),r.e(f.t0);case 26:return f.prev=26,r.f(),f.finish(26);case 29:return f.next=31,y.controls.dispatch("ithemes-security/user-groups","saveGroupSettingsAsBatch",t);case 31:if(!((c=f.sent)instanceof Error)){f.next=36;break}return f.next=35,Ie("error",Object(u.sprintf)(Object(u.__)("Could not save user groups: %s","it-l10n-ithemes-security-pro"),c.message));case 35:return f.abrupt("return",c);case 36:i=0,o=Object.entries(c.byId);case 37:if(!(i<o.length)){f.next=49;break}if(a=b()(o[i],2),l=a[0],!((d=a[1]).status>=400)){f.next=44;break}return f.next=42,{type:Dt,id:l,error:d.body};case 42:f.next=46;break;case 44:return f.next=46,{type:Tt,id:l,updated:d.body};case 46:i++,f.next=37;break;case 49:return f.next=51,Ie("success",Object(u.__)("Saved user groups.","it-l10n-ithemes-security-pro"),{type:"snackbar"});case 51:return f.abrupt("return",c);case 52:case"end":return f.stop()}}),We,null,[[12,23,26,29]])}function dt(e,t,r){return{type:Pt,module:e,setting:t,value:r}}function pt(e,t){return{type:At,module:e,setting:t}}function bt(){return{type:Ct}}function ft(e){var t,r,n;return m.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,y.controls.select("ithemes-security/user-groups-editor","getBulkSettingEdits");case 2:return t=s.sent,s.next=5,y.controls.dispatch("ithemes-security/user-groups","patchBulkGroupSettings",e,t);case 5:if(!((r=s.sent)instanceof Error)){s.next=11;break}return s.next=9,Ie("error",r.message);case 9:s.next=19;break;case 11:if(!Object(N.map)(r,"status").every((function(e){return 200===e}))){s.next=16;break}return s.next=14,Ie("success",Object(u.__)("Updated group settings.","it-l10n-ithemes-security-pro"),{type:"snackbar"});case 14:s.next=19;break;case 16:return n=r.filter((function(e){return 200!==e.status})).flatMap((function(e){var t=e.error;return Object(ce.e)(t).getAllErrorMessages()})),s.next=19,{type:jt,errors:n};case 19:return s.next=21,bt();case 21:return s.abrupt("return",r);case 22:case"end":return s.stop()}}),Ke)}function gt(e){var t,r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.controls.select("ithemes-security/user-groups-editor","hasEdits",e);case 2:if(!n.sent){n.next=7;break}return n.delegateYield(et(e),"t0",4);case 4:if(!((t=n.t0)instanceof Error)){n.next=7;break}return n.abrupt("return",t);case 7:return n.next=9,y.controls.select("ithemes-security/user-groups-editor","settingHasEdits",e);case 9:if(!n.sent){n.next=14;break}return n.delegateYield(at(e),"t1",11);case 11:if(!((r=n.t1)instanceof Error)){n.next=14;break}return n.abrupt("return",r);case 14:return n.abrupt("return",null);case 15:case"end":return n.stop()}}),Ye)}function Ot(){var e,t,r,n,s,c,i,u,o;return m.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,y.controls.resolveSelect(a.MODULES_STORE_NAME,"getEditedModules");case 2:return e=l.sent,l.next=5,y.controls.select("ithemes-security/user-groups-editor","getMatchableNavIds");case 5:t=l.sent,r=Ue(t),l.prev=7,r.s();case 9:if((n=r.n()).done){l.next=41;break}s=n.value,c=Ue(e),l.prev=12,c.s();case 14:if((i=c.n()).done){l.next=31;break}if("active"===(u=i.value).status.selected){l.next=18;break}return l.abrupt("continue",29);case 18:l.t0=m.a.keys(u.user_groups);case 19:if((l.t1=l.t0()).done){l.next=29;break}if(o=l.t1.value,u.user_groups.hasOwnProperty(o)){l.next=23;break}return l.abrupt("continue",19);case 23:if("all"===u.user_groups[o].default){l.next=25;break}return l.abrupt("continue",19);case 25:return l.next=27,ot(s,u.id,o,!0);case 27:l.next=19;break;case 29:l.next=14;break;case 31:l.next=36;break;case 33:l.prev=33,l.t2=l.catch(12),c.e(l.t2);case 36:return l.prev=36,c.f(),l.finish(36);case 39:l.next=9;break;case 41:l.next=46;break;case 43:l.prev=43,l.t3=l.catch(7),r.e(l.t3);case 46:return l.prev=46,r.f(),l.finish(46);case 49:case"end":return l.stop()}}),ze,null,[[7,43,46,49],[12,33,36,39]])}function mt(){var e,t,r,n,s,c,i,o,d,p,b,f,g,O,h,j,v,E,_,S,x,k,I,G,w,L,R,T,D,P,A,C,U,M,F,B,V,$;return m.a.wrap((function(H){for(;;)switch(H.prev=H.next){case 0:return e={administrator:Object(u.__)("Administrators","it-l10n-ithemes-security-pro"),editor:Object(u.__)("Editors","it-l10n-ithemes-security-pro"),author:Object(u.__)("Authors","it-l10n-ithemes-security-pro"),contributor:Object(u.__)("Contributors","it-l10n-ithemes-security-pro"),subscriber:Object(u.__)("Subscribers","it-l10n-ithemes-security-pro")},H.next=3,y.controls.resolveSelect(a.MODULES_STORE_NAME,"getEditedModules");case 3:return t=H.sent,H.next=6,y.controls.resolveSelect("ithemes-security/user-groups","getMatchables");case 6:return r=H.sent,H.next=9,y.controls.select("ithemes-security/user-groups-editor","getLocalGroupIds");case 9:return n=H.sent,H.next=12,y.controls.select(l.ONBOARD_STORE_NAME,"getAnswers");case 12:s=H.sent,c={administrator:[],editor:[],author:[],contributor:[],subscriber:[]},i=Ue(Object(N.map)(Object(N.filter)(r,{type:"user-group"}),"id").concat(n)),H.prev=15,i.s();case 17:if((o=i.n()).done){H.next=26;break}return d=o.value,H.next=21,y.controls.select("ithemes-security/user-groups-editor","getEditedGroupAttribute",d,"canonical");case 21:p=H.sent,b=Ue(p);try{for(b.s();!(f=b.n()).done;)g=f.value,c[g].push(d)}catch(e){b.e(e)}finally{b.f()}case 24:H.next=17;break;case 26:H.next=31;break;case 28:H.prev=28,H.t0=H.catch(15),i.e(H.t0);case 31:return H.prev=31,i.f(),H.finish(31);case 34:O={},h=Ue(s);try{for(h.s();!(j=h.n()).done;)v=j.value,Object(N.isPlainObject)(v.canonical_group_substitutions)&&Object.assign(O,v.canonical_group_substitutions)}catch(e){h.e(e)}finally{h.f()}H.t1=m.a.keys(e);case 38:if((H.t2=H.t1()).done){H.next=159;break}if(E=H.t2.value,e.hasOwnProperty(E)){H.next=42;break}return H.abrupt("continue",38);case 42:if(_=c[E],!O.hasOwnProperty(E)){H.next=47;break}if(null!==O[E]||_.length){H.next=46;break}return H.abrupt("continue",38);case 46:_.push(O[E]);case 47:if(0!==_.length){H.next=54;break}return S=Ce(),H.next=51,ut(S);case 51:return H.next=53,Ze(S,{label:e[E],canonical:[E]});case 53:_.push(S);case 54:"subscriber"===E&&_.push("everybody-else"),x=Ue(t),H.prev=56,x.s();case 58:if((k=x.n()).done){H.next=93;break}if("active"===(I=k.value).status.selected){H.next=62;break}return H.abrupt("continue",91);case 62:H.t3=m.a.keys(I.user_groups);case 63:if((H.t4=H.t3()).done){H.next=91;break}if(G=H.t4.value,I.user_groups.hasOwnProperty(G)){H.next=67;break}return H.abrupt("continue",63);case 67:if(I.user_groups[G].default){H.next=69;break}return H.abrupt("continue",63);case 69:if(w=I.user_groups[G].default,Array.isArray(w)||(w=[w]),!(Object(N.intersection)(["all",E],w).length>0)){H.next=89;break}L=Ue(_),H.prev=73,L.s();case 75:if((R=L.n()).done){H.next=81;break}return T=R.value,H.next=79,ot(T,I.id,G,!0);case 79:H.next=75;break;case 81:H.next=86;break;case 83:H.prev=83,H.t5=H.catch(73),L.e(H.t5);case 86:return H.prev=86,L.f(),H.finish(86);case 89:H.next=63;break;case 91:H.next=58;break;case 93:H.next=98;break;case 95:H.prev=95,H.t6=H.catch(56),x.e(H.t6);case 98:return H.prev=98,x.f(),H.finish(98);case 101:D=Ue(s),H.prev=102,D.s();case 104:if((P=D.n()).done){H.next=149;break}if((A=P.value).user_groups_settings[E]){H.next=108;break}return H.abrupt("continue",147);case 108:H.t7=m.a.keys(A.user_groups_settings[E]);case 109:if((H.t8=H.t7()).done){H.next=147;break}if(C=H.t8.value,A.user_groups_settings[E].hasOwnProperty(C)){H.next=113;break}return H.abrupt("continue",109);case 113:U=Ue(A.user_groups_settings[E][C]),H.prev=114,U.s();case 116:if((M=U.n()).done){H.next=137;break}F=M.value,B=Ue(_),H.prev=119,B.s();case 121:if((V=B.n()).done){H.next=127;break}return $=V.value,H.next=125,ot($,C,F,!0);case 125:H.next=121;break;case 127:H.next=132;break;case 129:H.prev=129,H.t9=H.catch(119),B.e(H.t9);case 132:return H.prev=132,B.f(),H.finish(132);case 135:H.next=116;break;case 137:H.next=142;break;case 139:H.prev=139,H.t10=H.catch(114),U.e(H.t10);case 142:return H.prev=142,U.f(),H.finish(142);case 145:H.next=109;break;case 147:H.next=104;break;case 149:H.next=154;break;case 151:H.prev=151,H.t11=H.catch(102),D.e(H.t11);case 154:return H.prev=154,D.f(),H.finish(154);case 157:H.next=38;break;case 159:return H.next=161,y.controls.select("ithemes-security/user-groups-editor","getMatchableNavIds");case 161:return H.abrupt("return",H.sent);case 162:case"end":return H.stop()}}),Qe,null,[[15,28,31,34],[56,95,98,101],[73,83,86,89],[102,151,154,157],[114,139,142,145],[119,129,132,135]])}var ht="SET_GROUP_ERROR",jt="SET_BULK_ERRORS",vt="EDIT_GROUP",yt="RESET_EDITS",Et="RESET_ALL_EDITS",_t="CREATE_LOCAL_GROUP",St="DELETE_LOCAL_GROUP",xt="DELETE_LOCAL_GROUPS",kt="MARK_GROUP_FOR_DELETION",It="START_SAVE_GROUP",Gt="FINISH_SAVE_GROUP",wt="FAILED_SAVE_GROUP",Lt="EDIT_GROUP_SETTING",Nt="RESET_GROUP_SETTING",Rt="START_SAVE_GROUP_SETTINGS",Tt="FINISH_SAVE_GROUP_SETTINGS",Dt="FAILED_SAVE_GROUP_SETTINGS",Pt="BULK_EDIT_GROUP_SETTING",At="RESET_BULK_GROUP_SETTING_EDIT",Ct="RESET_BULK_GROUP_SETTING_EDITS",Ut=r("pPDe");function Mt(e){return e.localGroupIds}function Ft(e,t){return e.localGroupIds.includes(t)}var Bt=Object(y.createRegistrySelector)((function(e){return function(t,r){return Ft(t,r)?"user-group":e("ithemes-security/user-groups").getMatchableType(r)}})),Vt=Object(y.createRegistrySelector)((function(e){return function(t,r){return t.saving.includes(r)||e("ithemes-security/user-groups").isUpdating(r)||e("ithemes-security/user-groups").isUpdatingSettings(r)}}));function $t(e,t){return e.edits[t]}var Ht=Object(y.createRegistrySelector)((function(e){return function(t,r,n){var s=Object(N.get)(t,["edits",r,n]);return void 0!==s?s:"new"===r||Ft(t,r)?void 0:e("ithemes-security/user-groups").getGroupAttribute(r,n)}})),qt=Object(y.createRegistrySelector)((function(e){return function(t,r){return"user-group"!==e("ithemes-security/user-groups-editor").getMatchableType(r)?e("ithemes-security/user-groups").getMatchableLabel(r):e("ithemes-security/user-groups-editor").getEditedGroupAttribute(r,"label")}}));function Wt(e,t){return e.edits[t]&&!Object(N.isEmpty)(e.edits[t])}var Kt=Object(Ut.a)((function(e){return Object.keys(e.edits).filter((function(t){return!Object(N.isEmpty)(e.edits[t])}))}),(function(e){return e.edits}));function Yt(e,t){return!!e.settingEdits[t]}function zt(e,t){return e.settingEdits[t]}var Qt=se()((function(e,t){return Object(N.merge)({},e,t)}),{maxSize:1}),Xt=Object(y.createRegistrySelector)((function(e){return function(t,r){var n=Ft(t,r)?{}:e("ithemes-security/user-groups").getGroupSettings(r),s=zt(t,r);return Qt(n,s)}})),Jt=Object(y.createRegistrySelector)((function(e){return function(t,r,n,s){var c=Object(N.get)(t,["settingEdits",r,n,s]);return void 0!==c?c:!Ft(t,r)&&e("ithemes-security/user-groups").getGroupSetting(r,n,s)}})),Zt=Object(y.createRegistrySelector)((function(e){return function(t){var r=e("ithemes-security/user-groups").getGroupsBySetting();if(Object(N.isEmpty)(t.settingEdits)||Object(N.isEmpty)(r))return r;for(var n=Object(N.cloneDeep)(r),s=0,c=Object.entries(t.settingEdits);s<c.length;s++)for(var i=b()(c[s],2),u=i[0],o=i[1],a=0,l=Object.entries(o);a<l.length;a++)for(var d=b()(l[a],2),p=d[0],f=d[1],g=0,O=Object.entries(f);g<O.length;g++){var m,h=b()(O[g],2),j=h[0],v=h[1];null!==(m=n[p])&&void 0!==m&&m[j]&&(v?n[p][j].push(u):Object(N.pull)(n[p][j],u))}return n}})),er=Object(Ut.a)((function(e){return Object.keys(e.settingEdits).filter((function(t){return!Object(N.isEmpty)(e.settingEdits[t])}))}),(function(e){return e.settingEdits}));function tr(e,t){return Wt(e,t)||Yt(e,t)}function rr(e){return!Object(N.isEmpty)(e.bulkSettingEdits)}function nr(e){return e.bulkSettingEdits}function sr(e,t,r){return Object(N.get)(e,["bulkSettingEdits",t,r])}var cr=Object(y.createRegistrySelector)((function(e){return function(t,r,n,s){var c=sr(t,n,s);if(void 0!==c)return c;var i=function(t){return e("ithemes-security/user-groups").getGroupSetting(t,n,s)},u=i(r[0]);return r.every((function(e){return i(e)===u}))?u:null}})),ir=Object(y.createRegistrySelector)((function(e){return function(t,r){var n=nr(t);return e("ithemes-security/user-groups").isBulkPatchingSettings(r,n)}})),ur=Object(y.createRegistrySelector)((function(e){return function(){return e("ithemes-security/user-groups").getGroups("available")}})),or=se()((function(e,t,r,n){if(t&&!e.length)return null;var s=Object(N.partition)(e,(function(e){return"user-group"===e.type})),c=b()(s,2),i=c[0],u=c[1];return i.map((function(e){return e.id})).concat(r).concat(u.map((function(e){return e.id}))).filter((function(e){return!n.includes(e)}))}),{maxSize:1}),ar=Object(y.createRegistrySelector)((function(e){return function(){var t=e("ithemes-security/user-groups").getMatchables(),r=e("core/data").isResolving("ithemes-security/user-groups","getMatchables"),n=e("ithemes-security/user-groups-editor").getLocalGroupIds(),s=e("ithemes-security/user-groups-editor").getGroupsMarkedForDeletion();return or(t,r,n,s)}}));function lr(e){return e.markedForDelete}function dr(e,t){return e.errors[t]}function pr(e){return e.bulkErrors}var br=m.a.mark(fr);function fr(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke("ithemes-security/user-groups","query","available",{_embed:1});case 2:case"end":return e.stop()}}),br)}function gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(r),!0).forEach((function(t){F()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mr={edits:{},settingEdits:{},bulkSettingEdits:{},localGroupIds:[],saving:[],errors:{},bulkErrors:[],markedForDelete:[]};Object(y.registerStore)("ithemes-security/user-groups-editor",{controls:we,actions:n,selectors:s,resolvers:c,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vt:return Or(Or({},e),{},{edits:Or(Or({},e.edits),{},F()({},t.id,t.edit))});case _t:return Or(Or({},e),{},{localGroupIds:[].concat(re()(e.localGroupIds),[t.id])});case St:return Or(Or({},e),{},{localGroupIds:e.localGroupIds.filter((function(e){return e!==t.id}))});case xt:return Or(Or({},e),{},{localGroupIds:[]});case It:return Or(Or({},e),{},{saving:[].concat(re()(e.saving),[t.id])});case wt:return Or(Or({},e),{},{saving:e.saving.filter((function(e){return e!==t.id})),errors:Or(Or({},e.errors),{},F()({},t.id,t.error))});case Gt:return Or(Or({},e),{},{edits:Object(N.omit)(e.edits,[t.id]),localGroupIds:e.localGroupIds.filter((function(e){return e!==t.id})),saving:e.saving.filter((function(e){return e!==t.id})),errors:Object(N.omit)(e.errors,[t.id])});case Lt:return Or(Or({},e),{},{settingEdits:Or(Or({},e.settingEdits),{},F()({},t.id,Or(Or({},Object(N.get)(e,["settingEdits",t.id],{})),{},F()({},t.module,Or(Or({},Object(N.get)(e,["settingEdits",t.id,t.module],{})),{},F()({},t.setting,t.value))))))});case Nt:var r=Or(Or({},e),{},{settingEdits:Or(Or({},e.settingEdits),{},F()({},t.id,Or(Or({},Object(N.get)(e,["settingEdits",t.id],{})),{},F()({},t.module,Object(N.omit)(Object(N.get)(e,["settingEdits",t.id,t.module],{}),[t.setting])))))});return Object(N.isEmpty)(r.settingEdits[t.id][t.module])&&delete r.settingEdits[t.id][t.module],Object(N.isEmpty)(r.settingEdits[t.id])&&delete r.settingEdits[t.id],r;case Tt:return Or(Or({},e),{},{settingEdits:Object(N.omit)(e.settingEdits,[t.id]),errors:Object(N.omit)(e.errors,[t.id])});case Dt:return Or(Or({},e),{},{errors:Or(Or({},e.errors),{},F()({},t.id,t.error))});case yt:return Or(Or({},e),{},{edits:Object(N.omit)(e.edits,[t.id]),settingEdits:Object(N.omit)(e.settingEdits,[t.id]),markedForDelete:e.markedForDelete.filter((function(e){return e!==t.id})),localGroupIds:e.localGroupIds.filter((function(e){return e!==t.id}))});case Et:return Or(Or({},e),{},{edits:{},settingEdits:{},bulkSettingEdits:{},markedForDelete:[],localGroupIds:[]});case Pt:return Or(Or({},e),{},{bulkSettingEdits:Or(Or({},e.bulkSettingEdits),{},F()({},t.module,Or(Or({},e.bulkSettingEdits[t.module]||{}),{},F()({},t.setting,t.value))))});case At:return Or(Or({},e),{},{bulkSettingEdits:Object(N.omit)(e.bulkSettingEdits,"".concat(t.module,".").concat(t.setting))});case Ct:return Or(Or({},e),{},{bulkSettingEdits:{}});case kt:return Or(Or({},e),{},{markedForDelete:[].concat(re()(e.markedForDelete),[t.id])});case ht:return Or(Or({},e),{},{errors:t.error?Or(Or({},e.errors),{},F()({},t.id,t.error)):Object(N.omit)(e.errors,[t.id])});case jt:return Or(Or({},e),{},{bulkErrors:t.errors});default:return e}},persist:["edits","settingEdits","bulkSettingEdits","localGroupIds","markedForDelete"]});var hr=r("g56x");function jr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return vr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vr(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,c=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw c}}}}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object(hr.addAction)("ithemes-security.onboard.applyAnswerResponse","ithemes-security/user-groups/onboard.applyAnswerResponse",(function(e,t){var r,n=jr(t.user_groups);try{for(n.s();!(r=n.n()).done;){var s=r.value;e.dispatch("ithemes-security/user-groups-editor").createLocalGroup(s.id)&&e.dispatch("ithemes-security/user-groups-editor").editGroup(s.id,Object(N.pick)(s,["label","users","roles","canonical"]))}}catch(e){n.e(e)}finally{n.f()}for(var c in t.user_groups_settings)if(t.user_groups_settings.hasOwnProperty(c)&&Te(c)){var i=t.user_groups_settings[c];if(i)for(var u in i)if(i.hasOwnProperty(u)){var o,a=jr(i[u]);try{for(a.s();!(o=a.n()).done;){var l=o.value;e.dispatch("ithemes-security/user-groups-editor").editGroupSetting(c,u,l,!0)}}catch(e){a.e(e)}finally{a.f()}}}})),Object(hr.addAction)("ithemes-security.onboard.reset","ithemes-security/user-groups/onboard.reset",(function(e){e.dispatch("ithemes-security/user-groups-editor").deleteLocalGroups(),e.dispatch("ithemes-security/user-groups-editor").resetAllEdits()})),Object(hr.addFilter)("ithemes-security.settings.isConditionalSettingActive","ithemes-security/user-groups/user-group-conditional",(function(e,t,r,n){if(!e||!r["user-groups"])return e;var s,c=n.registry.select("ithemes-security/user-groups-editor").getEditedGroupsBySetting(),i=jr(r["user-groups"]);try{for(i.s();!(s=i.n()).done;){var u,o=s.value;if(!((null===(u=c[t.id])||void 0===u?void 0:u[o])||[]).length)return!1}}catch(e){i.e(e)}finally{i.f()}return!0}));r("wM0a");function yr(){return z(),Q(),Object(i.createElement)(l.Page,{id:"user-groups",title:Object(u.__)("User Groups","it-l10n-ithemes-security-pro"),icon:"groups",priority:10,roots:["onboard","settings","import"]},(function(){return Object(i.createElement)(d,null)}))}r.p=window.itsecWebpackPublicPath,Object(u.setLocaleData)({"":{}},"ithemes-security-pro"),Object(o.registerPlugin)("itsec-user-groups",{render:function(){return Object(i.createElement)(yr,null)}})},faye:function(e,t){!function(){e.exports=this.ReactDOM}()},g56x:function(e,t){!function(){e.exports=this.wp.hooks}()},gdqT:function(e,t){!function(){e.exports=this.wp.a11y}()},l3Sj:function(e,t){!function(){e.exports=this.wp.i18n}()},on51:function(e,t){!function(){e.exports=this.itsec.pages.settings}()},onLe:function(e,t){!function(){e.exports=this.wp.notices}()},pPDe:function(e,t,r){"use strict";var n,s;function c(e){return[e]}function i(){var e={clear:function(){e.head=null}};return e}function u(e,t,r){var n;if(e.length!==t.length)return!1;for(n=r;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}n={},s="undefined"!=typeof WeakMap,t.a=function(e,t){var r,o;function a(){r=s?new WeakMap:i()}function l(){var r,n,s,c,i,a=arguments.length;for(c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];for(i=t.apply(null,c),(r=o(i)).isUniqueByDependants||(r.lastDependants&&!u(i,r.lastDependants,0)&&r.clear(),r.lastDependants=i),n=r.head;n;){if(u(n.args,c,1))return n!==r.head&&(n.prev.next=n.next,n.next&&(n.next.prev=n.prev),n.next=r.head,n.prev=null,r.head.prev=n,r.head=n),n.val;n=n.next}return n={val:e.apply(null,c)},c[0]=null,n.args=c,r.head&&(r.head.prev=n,n.next=r.head),r.head=n,n.val}return t||(t=c),o=s?function(e){var t,s,c,u,o,a=r,l=!0;for(t=0;t<e.length;t++){if(s=e[t],!(o=s)||"object"!=typeof o){l=!1;break}a.has(s)?a=a.get(s):(c=new WeakMap,a.set(s,c),a=c)}return a.has(n)||((u=i()).isUniqueByDependants=l,a.set(n,u)),a.get(n)}:function(){return r},l.getDependants=t,l.clear=a,a(),l}},rl8x:function(e,t){!function(){e.exports=this.wp.isShallowEqual}()},sPxh:function(e,t){!function(){e.exports=this.itsec["user-groups"].api}()},"tI+e":function(e,t){!function(){e.exports=this.wp.components}()},wM0a:function(e,t,r){},ywyh:function(e,t){!function(){e.exports=this.wp.apiFetch}()},z1rk:function(e,t){!function(){e.exports=this.itsec.packages.data}()}},[["epig",0,5,1,4,7,8,2,3,6]]]);