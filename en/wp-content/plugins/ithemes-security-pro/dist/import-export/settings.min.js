this.itsec=this.itsec||{},this.itsec["import-export"]=this.itsec["import-export"]||{},this.itsec["import-export"].settings=(window.itsecWebpackJsonP=window.itsecWebpackJsonP||[]).push([[24],{"0x0D":function(e,t,n){"use strict";n.r(t);var r=n("GRId"),c=n("TvNi"),o=n("l3Sj"),a=n("yXPU"),i=n.n(a),s=n("o0o1"),l=n.n(s),u=n("Ty5D"),p=n("55Ip"),b=n("1ZqX"),m=n("tI+e"),O=n("on51"),d=n("daJv"),j=n("z1rk"),f=n("ppSj"),E=n("Td6G"),h=n("J4zp"),_=n.n(h),g=n("YLtl"),x=n("Iab2"),v=n("FqII"),y=n("49++");n("jcGb");function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function I(){var e=Object(u.k)().url,t=Object(r.useState)(!1),n=_()(t,2),c=n[0],a=n[1],s=Object(r.useState)(!1),j=_()(s,2),E=j[0],h=j[1],N=Object(f.f)(),I=_()(N,4),C=I[0],R=I[1],L=I[2],A=I[3],T=Object(b.useSelect)((function(e){return{exports:e(d.STORE_NAME).getExports(),sources:e(d.STORE_NAME).getSources()}}),[]),k=T.exports,M=T.sources,P=Object(b.useDispatch)(d.STORE_NAME).deleteExports,D=function(){var e=i()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,P(C);case 3:a(!1),A([]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=i()(l.a.mark((function e(){var t,n,r,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!0),t=S(k),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=14;break}if(r=n.value,!C.includes(r.id)){e.next=12;break}return c=new window.Blob([JSON.stringify(Object(g.omit)(r,["_links"]))],{type:"text/plain;charset=utf-8"}),o=r.metadata.title?Object(g.kebabCase)(r.metadata.title):Object(v.gmdate)("y-m-d",r.metadata.exported_at),Object(x.saveAs)(c,"itsec-export-".concat(o,".json")),e.next=12,w(1e3);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:h(!1);case 23:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(React.Fragment,null,Object(r.createElement)(O.PageHeader,{title:Object(o.__)("Manage Exports","it-l10n-ithemes-security-pro"),subtitle:Object(o.__)("Download, import, or create a new security settings export.","it-l10n-ithemes-security-pro")}),Object(r.createElement)(m.Card,{className:"itsec-exports-card"},Object(r.createElement)(m.CardHeader,{size:"extraSmall",isBorderless:!0},Object(r.createElement)(m.Button,{icon:"download",text:Object(o.__)("Download","it-l10n-ithemes-security-pro"),disabled:0===C.length||E,isBusy:E,onClick:B}),Object(r.createElement)(m.Button,{icon:"trash",text:Object(o.__)("Delete","it-l10n-ithemes-security-pro"),disabled:0===C.length||c,isBusy:c,onClick:D}),Object(r.createElement)(y.j,null),Object(r.createElement)(p.a,{to:"/import",component:Object(f.j)(m.Button),text:Object(o.__)("Import","it-l10n-ithemes-security-pro"),icon:"upload"}),Object(r.createElement)(p.a,{to:e+"/create",component:Object(f.j)(m.Button),isSecondary:!0},Object(o.__)("Create New Export","it-l10n-ithemes-security-pro"))),Object(r.createElement)(m.CardBody,null,Object(r.createElement)(X,{exports:k,sources:M,selected:C,addSelected:R,removeSelected:L,setSelected:A}))),Object(r.createElement)(O.HelpFill,null,Object(r.createElement)(O.PageHeader,{title:Object(o.__)("Manage Exports","it-l10n-ithemes-security-pro")}),Object(r.createElement)(y.k,{topic:"export"})))}var C=n("lSNA"),R=n.n(C),L=n("pVnL"),A=n.n(L),T=n("QILm"),k=n.n(T),M=n("V7jF"),P=n("TSYQ"),D=n.n(P),B=n("tMTs");n("Xudl");function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=Object(M.c)(B.b);function H(e){var t=e.sources,n=e.isCreating,c=e.createExport,a=e.titleRequired,i=e.children,s=Object(r.useState)(""),l=_()(s,2),u=l[0],p=l[1],b=Object(r.useState)(""),O=_()(b,2),d=O[0],j=O[1],E=Object(r.useState)({}),h=_()(E,2),x=h[0],v=h[1],S=Object(f.f)(Object(g.map)(t,"slug")),N=_()(S,4),w=N[0],I=N[1],C=N[2],R=N[3];Object(r.useEffect)((function(){return R(Object(g.map)(t,"slug"))}),[t]);var L=t.map((function(e){return{name:e.slug,title:e.title,description:e.description,render:function(t){t.name,t.text;var n=k()(t,["name","text"]);return Object(r.createElement)(q,A()({source:e,options:x,setOptions:v,isIncluded:w.includes(e.slug),addSource:I,removeSource:C},n))}}}));return Object(r.createElement)("form",{onSubmit:function(e){e.preventDefault(),c({title:d,sources:w,options:x})}},Object(r.createElement)(m.Card,{className:"itsec-export-form"},Object(r.createElement)(m.CardHeader,{size:"extraSmall"},Object(r.createElement)(m.CheckboxControl,{label:Object(o.__)("Include All Data","it-l10n-ithemes-security-pro"),className:"itsec-export-form__include-all",checked:t.every((function(e){return w.includes(e.slug)})),onChange:function(e){return R(e?Object(g.map)(t,"slug"):[])}}),Object(r.createElement)(y.j,null),Object(r.createElement)(m.TextControl,{label:Object(o.__)("Export Name","it-l10n-ithemes-security-pro"),className:"itsec-export-form__name",value:d,onChange:j,required:a})),Object(r.createElement)(m.CardBody,null,Object(r.createElement)(y.a,{className:"itsec-export-form__sources",expanded:u,setExpanded:p,panels:L,isStyled:!0,allowNone:!0}))),Object(r.createElement)(m.Flex,null,i,Object(r.createElement)(y.j,null),Object(r.createElement)(m.Button,{isPrimary:!0,type:"submit",disabled:!w.length||n,isBusy:n},Object(o.__)("Create","it-l10n-ithemes-security-pro"))))}function q(e){var t=e.source,n=e.options,c=e.setOptions,a=e.isIncluded,i=e.addSource,s=e.removeSource,l=k()(e,["source","options","setOptions","isIncluded","addSource","removeSource"]);return Object(r.createElement)("div",l,Object(r.createElement)("div",{className:"itsec-export-form__include-source"},Object(r.createElement)(m.CheckboxControl,{label:Object(o.sprintf)(Object(o.__)("Include “%s” in Export","it-l10n-ithemes-security-pro"),t.title),checked:a,onChange:function(e){return e?i(t.slug):s(t.slug)}})),t.options&&a&&Object(r.createElement)(z,{source:t,options:n,setOptions:c}))}function z(e){var t=e.source,c=e.options,o=e.setOptions;return Object(r.createElement)(W,{tagName:"div",className:D()("rjsf","itsec-export-form__options-form","itsec-export-form__options-form--".concat(t.slug)),additionalMetaSchemas:[n("3jBn")],schema:t.options,uiSchema:t.options.uiSchema,idPrefix:"itsec_".concat(t.slug),formData:c[t.slug],onChange:function(e){o(U(U({},c),{},R()({},t.slug,e.formData)))}},Object(r.createElement)(React.Fragment,null))}n("TgFk");function X(e){var t=e.exports,n=e.sources,c=e.singleSelection,a=e.selected,i=e.addSelected,s=e.removeSelected,l=e.setSelected,u=e.isLoading,p=void 0!==u&&u,b=function(e){return function(t){c?l(t?[e]:[]):t?i(e):s(e)}},m=t.length>0?t.map((function(e){return Object(r.createElement)("tr",{key:e.id},Object(r.createElement)("td",{className:"itsec-exports-table__column-cb"},Object(r.createElement)(y.d,{label:Object(o.sprintf)(Object(o.__)("Select %s","it-l10n-ithemes-security-pro"),e.metadata.title),hideLabelFromVision:!0,className:"itsec-exports-table__export-cb",checked:a.includes(e.id),onChange:b(e.id)})),Object(r.createElement)("th",{className:"itsec-exports-table__column-name"},e.metadata.title),Object(r.createElement)("td",{className:"itsec-exports-table__column-date"},Object(v.dateI18n)("M j, Y",e.metadata.exported_at)),Object(r.createElement)("td",{className:"itsec-exports-table__column-content"},Object.keys(e.sources).map((function(e){var t;return(null===(t=Object(g.find)(n,{slug:e}))||void 0===t?void 0:t.title)||e})).join(", ")))})):Object(r.createElement)("tr",null,Object(r.createElement)("td",{colSpan:4},Object(o.__)("No exports found.","it-l10n-ithemes-security-pro")));return Object(r.createElement)("table",{className:"itsec-exports-list"},Object(r.createElement)("thead",null,Object(r.createElement)("tr",null,Object(r.createElement)("th",{className:"itsec-exports-table__column-cb"},!c&&Object(r.createElement)(y.d,{label:Object(o.__)("Select All Exports","it-l10n-ithemes-security-pro"),hideLabelFromVision:!0,className:"itsec-exports-table__export-cb",checked:t.length>0&&t.every((function(e){return a.includes(e.id)})),onChange:function(e){return l(e?Object(g.map)(t,"id"):[])}})),Object(r.createElement)("th",{className:"itsec-exports-table__column-name"},Object(o.__)("Name","it-l10n-ithemes-security-pro")),Object(r.createElement)("th",{className:"itsec-exports-table__column-date"},Object(o.__)("Date","it-l10n-ithemes-security-pro")),Object(r.createElement)("th",{className:"itsec-exports-table__column-content"},Object(o.__)("Content","it-l10n-ithemes-security-pro")))),Object(r.createElement)("tbody",null,p?Object(r.createElement)("tr",null,Object(r.createElement)("td",{colSpan:4,className:"itsec-exports-table__loading-message"},Object(o.__)("Loading exports…","it-l10n-ithemes-security-pro"))):m))}n("iS9/");function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(){var e=Object(b.useSelect)((function(e){return{roles:e(j.CORE_STORE_NAME).getRoles(),map:e(d.STORE_NAME).getImportRoleMap(),targets:e(d.STORE_NAME).getImportExportRoleReplacementTargets()}}),[]),t=e.roles,n=e.targets,c=e.map,a=Object(b.useDispatch)(d.STORE_NAME).editImportRoleMap;return n.length&&t?Object(r.createElement)(Z,{title:Object(o.__)("Replace Roles","it-l10n-ithemes-security-pro"),description:Object(o.__)("Choose the user roles that best match the roles from the export.","it-l10n-ithemes-security-pro")},n.map((function(e){return Object(r.createElement)($,{key:e.slug,target:e,value:c,onChange:a,roles:t})}))):null}function Y(){var e=Object(b.useSelect)((function(e){return{map:e(d.STORE_NAME).getImportUserMap(),targets:e(d.STORE_NAME).getImportExportUserReplacementTargets()}}),[]),t=e.targets,n=e.map,c=Object(b.useDispatch)(d.STORE_NAME).editImportUserMap;return t.length?Object(r.createElement)(Z,{title:Object(o.__)("Replace Users","it-l10n-ithemes-security-pro"),description:Object(o.__)("Choose the users that best match the users from the export.","it-l10n-ithemes-security-pro")},t.map((function(e){return Object(r.createElement)(Q,{key:e.id,target:e,value:n,onChange:c})}))):null}function Z(e){var t=e.title,n=e.description,c=e.children;return Object(r.createElement)("fieldset",{className:"itsec-import-export-entity-map"},Object(r.createElement)("legend",{className:"itsec-import-export-entity-map__title"},t),Object(r.createElement)("p",{className:"itsec-import-export-entity-map__description"},n),c)}function $(e){var t,n=e.target,c=e.value,o=e.onChange,a=e.roles,i=Object.entries(a).map((function(e){var t=_()(e,2);return{value:t[0],label:t[1].label}})).concat({value:"",label:""});return Object(r.createElement)(y.u,{label:n.label,value:null!==(t=c[n.slug])&&void 0!==t?t:a[n.slug]?n.slug:"",onChange:function(e){return o(J(J({},c),{},R()({},n.slug,e)))},options:i})}function Q(e){var t=e.target,n=e.value,c=e.onChange;return Object(r.createElement)(y.h,{value:n[t.id]||0,onChange:function(e){return c(J(J({},n),{},R()({},t.id,e)))},label:Object(o.sprintf)(Object(o.__)("%1$ss (%2$s)","it-l10n-ithemes-security-pro"),t.name,t.email),path:"/wp/v2/users",labelAttr:"name"})}var K=n("rmEH");n("9tQZ");function ee(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e){var t=e.showSpinner,n=e.isConnected,c=Object(b.useSelect)((function(e){return{url:e(d.STORE_NAME).getWpConnectSiteUrl(),discovery:e(d.STORE_NAME).getWpConnectDiscoveryResult()}}),[]),a=c.url,i=c.discovery,s=Object(g.get)(i,["data","index","home"]),l=Object(g.get)(i,["data","index","name"]),u=Object(g.get)(i,["data","index","description"]),p=Object(g.get)(i,["data","index","_embedded","wp:featuredmedia",0]),m=p&&function(e,t){var n,r=t.width?"width":"height",c=Object(g.sortBy)(e.media_details.sizes,r),o=ee(c);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a[r]>t[r])return a}}catch(e){o.e(e)}finally{o.f()}if(c.length)return Object(g.last)(c);return{height:e.media_details.height||t.height,width:e.media_details.width||t.width,source_url:e.source_url}}(p,{width:60}),O=n?Object(o.__)("Connected to %s","it-l10n-ithemes-security-pro"):Object(o.__)("Connecting to %s","it-l10n-ithemes-security-pro");return Object(r.createElement)("div",{className:"itsec-import-wordpress-connect-header"},m&&Object(r.createElement)("img",{src:m.source_url,height:m.height,width:m.width,alt:p.alt_text}),Object(r.createElement)("div",{className:"itsec-import-wordpress-connect-header__details"},Object(r.createElement)("h3",null,Object(o.sprintf)(O,s||a)),l&&Object(r.createElement)("span",{className:"itsec-import-wordpress-connect-header__name"},Object(K.decodeEntities)(l)),u&&Object(r.createElement)("span",{className:"itsec-import-wordpress-connect-header__description"},Object(K.decodeEntities)(u))),t&&Object(r.createElement)(y.w,{color:"--itsec-primary-theme-color"}))}function re(){return Object(r.createElement)(O.Page,{id:"exports",title:Object(o.__)("Exports","it-l10n-ithemes-security-pro"),icon:"download",location:"advanced"},(function(){return Object(r.createElement)(ce,null)}))}function ce(){var e=Object(u.k)().path;return Object(r.createElement)(u.d,null,Object(r.createElement)(u.b,{path:e+"/create",component:oe}),Object(r.createElement)(u.b,{component:I}))}function oe(){var e=Object(b.useSelect)((function(e){return{sources:e(d.STORE_NAME).getSources(),isCreating:e(d.STORE_NAME).isCreatingExport(),lastResult:e(d.STORE_NAME).getLastCreatedExportResult()}}),[]),t=e.sources,n=e.isCreating,c=e.lastResult,a=Object(b.useDispatch)(d.STORE_NAME).createExport;return Object(r.createElement)(React.Fragment,null,Object(r.createElement)(O.PageHeader,{title:Object(o.__)("Create New Export","it-l10n-ithemes-security-pro"),subtitle:Object(o.__)("Choose which elements of iThemes Security to include in the export.","it-l10n-ithemes-security-pro")}),(null==c?void 0:c.isSuccess())&&Object(r.createElement)(y.q,{type:"success",hasBorder:!0,messages:[Object(r.createInterpolateElement)(Object(o.__)("Export created. <a>Back to list</a>.","it-l10n-ithemes-security-pro"),{a:Object(r.createElement)(p.a,{to:"/settings/exports"})})]}),Object(r.createElement)(y.t,{result:c,hasBorder:!0}),t.length>0&&Object(r.createElement)(H,{sources:t,isCreating:n,createExport:a,titleRequired:!0}),Object(r.createElement)(O.HelpFill,null,Object(r.createElement)(O.PageHeader,{title:Object(o.__)("Create New Export","it-l10n-ithemes-security-pro")}),Object(r.createElement)(y.k,{topic:"create-export",fallback:"export"})))}function ae(){return Object(r.createElement)(O.Page,{id:"select-export",title:Object(o.__)("Select Export","it-l10n-ithemes-security-pro"),roots:["import"],priority:0},(function(){return Object(r.createElement)(ie,null)}))}function ie(){var e=Object(u.k)(),t=e.path,n=e.url;return Object(r.createElement)(React.Fragment,null,Object(r.createElement)(u.d,null,Object(r.createElement)(u.b,{path:"".concat(t,"/wordpress-create"),render:function(){return Object(r.createElement)(ye,{baseUrl:n})}}),Object(r.createElement)(u.b,{path:"".concat(t,"/wordpress-select"),render:function(){return Object(r.createElement)(ve,{baseUrl:n})}}),Object(r.createElement)(u.b,{path:"".concat(t,"/wordpress-connect"),render:function(){return Object(r.createElement)(Oe,{baseUrl:n})}}),Object(r.createElement)(u.b,{path:"".concat(t,"/summary"),render:function(){return Object(r.createElement)(Se,{baseUrl:n})}}),Object(r.createElement)(u.b,{path:t,render:function(){return Object(r.createElement)(se,{baseUrl:n})}})),Object(r.createElement)(O.HelpFill,null,Object(r.createElement)(O.PageHeader,{title:Object(o.__)("Import","it-l10n-ithemes-security-pro")}),Object(r.createElement)(y.k,{topic:"import"})))}n("7oyf");function se(e){var t=e.baseUrl,n=Object(O.useNavigateTo)(),c=Object(u.k)().url,a=Object(b.useDispatch)(d.STORE_NAME),s=a.validateExportFile,p=a.resetImport,j=function(){var e=i()(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.length){e.next=4;break}return e.next=3,s(r[0]);case 3:n("".concat(t,"/summary"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){p()}),[]),Object(r.createElement)(React.Fragment,null,Object(r.createElement)(O.PageHeader,{title:Object(o.__)("Select Export","it-l10n-ithemes-security-pro"),description:Object(o.__)("Either upload an export file, or enter the URL of a website running iThemes Security.","it-l10n-ithemes-security-pro")}),Object(r.createElement)("div",{className:"itsec-import-select-export-choices"},Object(r.createElement)(m.FormFileUpload,{onChange:function(e){return j(e.target.files)},accept:"text/plain,application/json,application/zip",render:function(e){var t=e.openFileDialog;return Object(r.createElement)(O.SelectableCard,{title:Object(o.__)("Upload File","it-l10n-ithemes-security-pro"),description:Object(o.__)("Upload an iThemes Security export file from your computer.","it-l10n-ithemes-security-pro"),icon:"upload",direction:"vertical",onClick:t})}}),Object(r.createElement)(O.SelectableCard,{title:Object(o.__)("WordPress Site","it-l10n-ithemes-security-pro"),description:Object(o.__)("Import from a WordPress site running iThemes Security.","it-l10n-ithemes-security-pro"),icon:"wordpress",direction:"vertical",to:"".concat(c,"/wordpress-connect")})),Object(r.createElement)(m.DropZone,{className:"itsec-import-export-dropzone",onFilesDrop:j}))}var le=n("TZi5"),ue=n("Mmq9"),pe=(n("6RBP"),Object(m.createSlotFill)("ImportExportWordPressConnect")),be=pe.Slot,me=pe.Fill;function Oe(e){var t=e.baseUrl,n=Object(b.useSelect)((function(e){return{step:e(d.STORE_NAME).getWpConnectStep(),url:e(d.STORE_NAME).getWpConnectSiteUrl(),discoveredApi:e(d.STORE_NAME).getWpConnectDiscoveryResult(),isExpired:e(d.STORE_NAME).areWpConnectCredentialsExpired(),isDeleting:e(d.STORE_NAME).isDeletingWpConnectCredential()}}),[]),c=n.step,a=n.url,i=n.discoveredApi,s=n.isExpired,l=n.isDeleting,u=Object(b.useDispatch)(d.STORE_NAME),p=u.wpConnectReset,j=u.wpConnectEnterWebsite,f=u.wpConnectDiscoverRestApi,E=u.wpConnectApplicationApproved,h=u.wpConnectApplicationRejected,g=Object(le.f)({user_login:le.d,password:le.d,site_url:le.d,success:le.d}),x=_()(g,2),v=x[0],S=x[1];Object(r.useEffect)((function(){v.site_url&&v.user_login&&v.password?E(v.site_url,{username:v.user_login,password:v.password}):"false"===v.success&&h(),S({},"replace")}),[v]);var N=["enterWebsite","discovering"].includes(c);return Object(r.createElement)(React.Fragment,null,Object(r.createElement)(O.PageHeader,{title:Object(o.__)("Connect to WordPress","it-l10n-ithemes-security-pro"),description:Object(o.__)("Import from a WordPress site running iThemes Security.","it-l10n-ithemes-security-pro")}),Object(r.createElement)("form",{onSubmit:function(e){e.preventDefault(),"enterWebsite"===c&&f(a)}},Object(r.createElement)(m.Card,{className:"itsec-import-wordpress-connect"},!N&&Object(r.createElement)(m.CardHeader,null,Object(r.createElement)(ne,{showSpinner:"appAuthed"===c})),Object(r.createElement)(m.CardBody,null,N&&Object(r.createElement)(de,{url:a,setUrl:j,isDiscovering:"discovering"===c}),Object(r.createElement)(y.t,{result:i}),Object(r.createElement)(he,{step:c}),Object(r.createElement)(_e,{step:c}),Object(r.createElement)(je,{step:c,isExpired:s}),Object(r.createElement)(fe,{step:c}),Object(r.createElement)(ge,{step:c}),Object(r.createElement)(Ee,{step:c,baseUrl:t,isExpired:s}))),Object(r.createElement)(m.Flex,null,!N&&Object(r.createElement)(m.Button,{text:Object(o.__)("Start Again","it-l10n-ithemes-security-pro"),onClick:p,isBusy:l,disabled:l,isSecondary:!0}),Object(r.createElement)(y.j,null),Object(r.createElement)(be,null))))}function de(e){var t=e.url,n=e.setUrl,c=e.isDiscovering;return Object(r.createElement)(React.Fragment,null,Object(r.createElement)(m.TextControl,{type:"url",label:Object(o.__)("WordPress URL","it-l10n-ithemes-security-pro"),value:t,onChange:n}),Object(r.createElement)(me,null,Object(r.createElement)(m.Button,{text:Object(o.__)("Connect","it-l10n-ithemes-security-pro"),type:"submit",isPrimary:!0,isBusy:c,disabled:c})))}function je(e){var t=e.step,n=e.isExpired,c=Object(b.useSelect)((function(e){return{endpoint:e(d.STORE_NAME).getWpConnectAppPasswordsAuthEndpoint()}}),[]).endpoint;if(!["awaitingAuth","appRejected"].includes(t)&&!n)return null;var a,i=(a=c,Object(ue.addQueryArgs)(a,{app_name:Object(o.sprintf)(Object(o.__)("iThemes Security Import (%1$s) on %2$s","it-l10n-ithemes-security-pro"),window.location.hostname,Object(v.dateI18n)("M j")),app_id:"0fc6ff2d-d96f-5033-838f-90cc2bf48d9d",success_url:window.location.href}));return Object(r.createElement)(React.Fragment,null,n&&Object(r.createElement)(y.q,{type:"warning",messages:Object(o.__)("Authentication expired. Please reauthorize iThemes Security.","it-l10n-ithemes-security-pro")}),Object(r.createElement)(y.q,{type:"info",title:Object(o.__)("Continue Authentication","it-l10n-ithemes-security-pro"),messages:Object(r.createInterpolateElement)(Object(o.__)("<a>Authorize iThemes Security</a> to connect to your WordPress site to continue the import process.","it-l10n-ithemes-security-pro"),{a:Object(r.createElement)("a",{href:i})})}),Object(r.createElement)(me,null,Object(r.createElement)(m.Button,{text:Object(o.__)("Authorize iThemes Security","it-l10n-ithemes-security-pro"),href:i,isPrimary:!0})))}function fe(e){e.step;return null}function Ee(e){var t=e.step,n=e.baseUrl;return e.isExpired||!["appAuthed","hasSupport"].includes(t)?null:Object(r.createElement)(me,null,Object(r.createElement)(p.a,{to:"".concat(n,"/wordpress-select"),component:Object(f.j)(m.Button),isPrimary:!0,text:Object(o.__)("Select Export","it-l10n-ithemes-security-pro"),disabled:"appAuthed"===t}))}function he(e){return"noAppPasswords"===e.step&&Object(r.createElement)(y.q,{type:"error",messages:Object(o.__)("The website cannot be connected to because it does not support Application Passwords.","it-l10n-ithemes-security-pro")})}function _e(e){return"appRejected"===e.step&&Object(r.createElement)(y.q,{type:"error",messages:Object(o.__)("Application was not approved. You must click “I approve of this connection” to continue.","it-l10n-ithemes-security-pro")})}function ge(e){return"noSupport"===e.step&&Object(r.createElement)(y.q,{type:"error",messages:Object(o.__)("The website must be running iThemes Security 7.1 or later.","it-l10n-ithemes-security-pro")})}function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowLax,n=void 0!==t&&t,c=Object(O.useNavigateTo)(),o=Object(b.useSelect)((function(e){return{credentials:e(d.STORE_NAME).getWpConnectCredentials(),hasExports:e(d.STORE_NAME).hasWpConnectExports()}}),[]),a=o.credentials,i=o.hasExports;Object(r.useEffect)((function(){a||i&&n||c("/import/select-export/wordpress-connect")}),[a,i])}n("o9nh");function ve(e){var t=e.baseUrl;xe({allowLax:!0});var n=Object(O.useNavigateTo)(),c=Object(b.useSelect)((function(e){return{exports:e(d.STORE_NAME).getWpConnectExports(),sources:e(d.STORE_NAME).getWpConnectSources(),isLoading:!e(d.STORE_NAME).hasFinishedResolution("getWpConnectExports")||!e(d.STORE_NAME).hasFinishedResolution("getWpConnectSources")}}),[]),a=c.exports,s=c.sources,u=c.isLoading,j=Object(b.useDispatch)(d.STORE_NAME).validateExportData,E=Object(r.useState)([]),h=_()(E,2),x=h[0],v=h[1],S=function(){var e=i()(l.a.mark((function e(r){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!(c=Object(g.find)(a,{id:x[0]}))){e.next=6;break}return e.next=5,j(c);case 5:n("".concat(t,"/summary"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.createElement)(React.Fragment,null,Object(r.createElement)(O.PageHeader,{title:Object(o.__)("Pick from WordPress","it-l10n-ithemes-security-pro"),description:Object(o.__)("Select an existing iThemes Security export or create a new one.","it-l10n-ithemes-security-pro")}),Object(r.createElement)("form",{onSubmit:S},Object(r.createElement)(m.Card,null,Object(r.createElement)(m.CardBody,null,Object(r.createElement)(ne,{isConnected:!0}))),Object(r.createElement)(m.Card,{className:"itsec-import-wordpress-connect-select-export"},Object(r.createElement)(m.CardBody,null,Object(r.createElement)(X,{exports:a,sources:s,singleSelection:!0,selected:x,setSelected:v,isLoading:u}))),Object(r.createElement)(m.Flex,null,Object(r.createElement)(y.j,null),Object(r.createElement)(p.a,{to:"".concat(t,"/wordpress-create"),component:Object(f.j)(m.Button),disabled:x.length>0,text:Object(o.__)("Create Export","it-l10n-ithemes-security-pro"),isSecondary:!0}),Object(r.createElement)(m.Button,{disabled:0===x.length,text:Object(o.__)("Select Export","it-l10n-ithemes-security-pro"),isPrimary:!0,type:"submit"}))))}function ye(e){var t=e.baseUrl;xe();var n=Object(O.useNavigateTo)(),c=Object(b.useSelect)((function(e){return{sources:e(d.STORE_NAME).getWpConnectSources(),isCreating:e(d.STORE_NAME).wpConnectIsCreating(),result:e(d.STORE_NAME).getWpConnectExport()}}),[]),a=c.sources,s=c.isCreating,u=c.result,j=Object(b.useDispatch)(d.STORE_NAME),E=j.wpConnectCreateExport,h=j.validateExportData,_=function(){var e=i()(l.a.mark((function e(r){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(r);case 2:if(!(c=e.sent).isSuccess()){e.next=7;break}return e.next=6,h(c.data);case 6:n("".concat(t,"/summary"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.createElement)(React.Fragment,null,Object(r.createElement)(O.PageHeader,{title:Object(o.__)("Create New Export","it-l10n-ithemes-security-pro")}),Object(r.createElement)(y.t,{result:u,hasBorder:!0}),Object(r.createElement)(m.Card,null,Object(r.createElement)(m.CardBody,null,Object(r.createElement)(ne,{isConnected:!0}))),Object(r.createElement)(H,{sources:a,isCreating:s,createExport:_},Object(r.createElement)(p.a,{to:t+"/wordpress-select",isSecondary:!0,text:Object(o.__)("Back","it-l10n-ithemes-security-pro"),component:Object(f.j)(m.Button)})))}n("tzjP");function Se(e){var t=e.baseUrl,n=Object(O.useNavigation)().goNext,c=Object(b.useSelect)((function(e){return{result:e(d.STORE_NAME).getImportExportValidationResult(),data:e(d.STORE_NAME).getImportExportData(),sources:e(d.STORE_NAME).getSources(),exportSource:e(d.STORE_NAME).getImportExportSource(),selectedSources:e(d.STORE_NAME).getImportSources()}}),[]),a=c.result,s=c.data,u=c.sources,j=c.exportSource,E=c.selectedSources,h=Object(b.useDispatch)(d.STORE_NAME),g=h.applyExportData,x=h.editImportSources;Object(r.useEffect)((function(){x(Object.keys((null==s?void 0:s.sources)||{}))}),[s]);var v=u.filter((function(e){return null==s?void 0:s.sources[e.slug]})).map((function(e){return{value:e.slug,label:e.title,help:e.description}})),S=Object(r.useState)(!1),N=_()(S,2),w=N[0],I=N[1],C=function(){var e=i()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,g();case 3:I(!1),n();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(React.Fragment,null,Object(r.createElement)(O.PageHeader,{title:Object(o.__)("Import Summary","it-l10n-ithemes-security-pro")}),Object(r.createElement)(y.t,{result:a}),Object(r.createElement)(m.Card,null,"connect"===j&&Object(r.createElement)(m.CardHeader,null,Object(r.createElement)(ne,{isConnected:!0})),Object(r.createElement)(Ne,{data:s,source:j})),s&&Object(r.createElement)(m.Card,null,Object(r.createElement)(m.CardBody,null,Object(r.createElement)(y.e,{label:Object(o.__)("Export Data","it-l10n-ithemes-security-pro"),help:Object(o.__)("Choose what iThemes Security info you’d like to import.","it-l10n-ithemes-security-pro"),value:E,onChange:x,options:v,className:"itsec-import-summary-select-data"}),E.length>0&&Object(r.createElement)(React.Fragment,null,Object(r.createElement)(Y,null),Object(r.createElement)(V,null)))),Object(r.createElement)(m.Flex,null,Object(r.createElement)(p.a,{to:we(t,j),isSecondary:!0,component:Object(f.j)(m.Button),text:Object(o.__)("Back","it-l10n-ithemes-security-pro")}),Object(r.createElement)(y.j,null),Object(r.createElement)(m.Button,{onClick:C,isPrimary:!0,isBusy:w,disabled:w||!E.length,text:Object(o.__)("Continue","it-l10n-ithemes-security-pro")})))}function Ne(e){var t=e.data,n=e.source,c=t.metadata.title;return c||"connect"===n||(c=Object(o.sprintf)(Object(o.__)("Exported from %s","it-l10n-ithemes-security-pro"),t.metadata.home_url)),Object(r.createElement)(m.CardBody,{className:"itsec-import-summary-export-details"},c&&Object(r.createElement)("h3",null,t.metadata.title),Object(r.createElement)("span",null,Object(o.sprintf)(Object(o.__)("Exported on %s","it-l10n-ithemes-security-pro"),Object(v.dateI18n)("M j, Y",t.metadata.exported_at))),Object(r.createElement)("span",null,Object(o.sprintf)(Object(o.__)("Version %s","it-l10n-ithemes-security-pro"),t.metadata.version)))}function we(e,t){switch(t){case"connect":return e+"/wordpress-select";default:return e}}n("O02R");function Ie(){return Re(),Object(r.createElement)(React.Fragment,null,Object(r.createElement)(ae,null),Object(r.createElement)(re,null),Object(r.createElement)(O.ToolbarFill,null,Object(r.createElement)(Ce,null)))}function Ce(){return"onboard"!==Object(u.j)().root?null:Object(r.createElement)(p.a,{to:"/import",component:Object(f.j)(m.ToolbarButton),text:Object(o.__)("Import","it-l10n-ithemes-security-pro"),icon:"upload"})}function Re(){var e=Object(b.useDispatch)(O.ONBOARD_STORE_NAME).registerCompletionStep,t=Object(b.useDispatch)(d.STORE_NAME),n=t.completeImport,c=t.resetImport,a=t.wpConnectReset;Object(f.g)(Re,(function(){e({id:"import",label:Object(o.__)("Complete Import","it-l10n-ithemes-security-pro"),priority:100,activeCallback:function(e){return"import"===e.root},callback:function(){return i()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if((t=e.sent).type===E.b.SUCCESS){e.next=7;break}throw{code:t.error.getErrorCode(),message:t.error.getAllErrorMessages().join(" ")};case 7:return e.next=9,c();case 9:return e.next=11,a();case 11:case"end":return e.stop()}}),e)})))()},render:function(){return Object(r.createElement)("p",null,Object(o.__)("Import remaining export data.","it-l10n-ithemes-security-pro"))}})}))}n.p=window.itsecWebpackPublicPath,Object(o.setLocaleData)({"":{}},"ithemes-security-pro"),Object(c.registerPlugin)("itsec-import-export-settings",{render:function(){return Object(r.createElement)(Ie,null)}})},"1ZqX":function(e,t){!function(){e.exports=this.wp.data}()},"6RBP":function(e,t,n){},"7oyf":function(e,t,n){},"9tQZ":function(e,t,n){},FqII:function(e,t){!function(){e.exports=this.wp.date}()},GRId:function(e,t){!function(){e.exports=this.wp.element}()},Iab2:function(e,t,n){(function(t){!function(e,t){"function"==typeof define&&define.amd?define([],t):t()}(0,(function(){"use strict";function n(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function c(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t&&t.global===t?t:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,t,a){var i=o.URL||o.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?c(s):r(s.href)?n(e,t,a):c(s,s.target="_blank")):(s.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(s.href)}),4e4),setTimeout((function(){c(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,o){if(t=t||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),t);else if(r(e))n(e,t,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){c(a)}))}}:function(e,t,r,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,r);var i="application/octet-stream"===e.type,s=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&s||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=e:location=e,c=null},u.readAsDataURL(e)}else{var p=o.URL||o.webkitURL,b=p.createObjectURL(e);c?c.location=b:location.href=b,c=null,setTimeout((function(){p.revokeObjectURL(b)}),4e4)}});o.saveAs=i.saveAs=i,e.exports=i}))}).call(this,n("yLpj"))},K9lf:function(e,t){!function(){e.exports=this.wp.compose}()},Mmq9:function(e,t){!function(){e.exports=this.wp.url}()},O02R:function(e,t,n){},RxS6:function(e,t){!function(){e.exports=this.wp.keycodes}()},TgFk:function(e,t,n){},Tqx9:function(e,t){!function(){e.exports=this.wp.primitives}()},TvNi:function(e,t){!function(){e.exports=this.wp.plugins}()},Xudl:function(e,t,n){},YLtl:function(e,t){!function(){e.exports=this.lodash}()},cDcd:function(e,t){!function(){e.exports=this.React}()},daJv:function(e,t){!function(){e.exports=this.itsec["import-export"].data}()},faye:function(e,t){!function(){e.exports=this.ReactDOM}()},gdqT:function(e,t){!function(){e.exports=this.wp.a11y}()},"iS9/":function(e,t,n){},jcGb:function(e,t,n){},l3Sj:function(e,t){!function(){e.exports=this.wp.i18n}()},o9nh:function(e,t,n){},on51:function(e,t){!function(){e.exports=this.itsec.pages.settings}()},rl8x:function(e,t){!function(){e.exports=this.wp.isShallowEqual}()},rmEH:function(e,t){!function(){e.exports=this.wp.htmlEntities}()},"tI+e":function(e,t){!function(){e.exports=this.wp.components}()},tzjP:function(e,t,n){},ywyh:function(e,t){!function(){e.exports=this.wp.apiFetch}()},z1rk:function(e,t){!function(){e.exports=this.itsec.packages.data}()}},[["0x0D",0,5,1,4,7,8,2,3,6]]]);